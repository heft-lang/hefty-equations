<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Effect.Logic</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Symbol">#-}</a> 

<a id="31" class="Comment">-- Defines a modal separation logic for predicates over effects, based on the</a>
<a id="109" class="Comment">-- ternary effect separation predicate defined in Effect.Separation </a>

<a id="179" class="Keyword">open</a> <a id="184" class="Keyword">import</a> <a id="191" href="Relation.Unary.html" class="Module">Relation.Unary</a>
<a id="206" class="Keyword">open</a> <a id="211" class="Keyword">import</a> <a id="218" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="234" class="Keyword">hiding</a> <a id="241" class="Symbol">(</a><a id="242" href="Relation.Binary.Core.html#1254" class="Function Operator">_⇒_</a><a id="245" class="Symbol">)</a>
<a id="247" class="Keyword">open</a> <a id="252" class="Keyword">import</a> <a id="259" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Effect.Base.html" class="Module">Effect.Base</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Effect.Separation.html" class="Module">Effect.Separation</a>
<a id="352" class="Keyword">open</a> <a id="357" class="Keyword">import</a> <a id="364" href="Effect.Inclusion.html" class="Module">Effect.Inclusion</a>

<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Data.Product.html" class="Module">Data.Product</a>
<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="Function.html" class="Module">Function</a> <a id="428" class="Keyword">using</a> <a id="434" class="Symbol">(</a><a id="435" href="Function.Base.html#1994" class="Function Operator">_$_</a> <a id="439" class="Symbol">;</a> <a id="441" href="Function.Base.html#1106" class="Function Operator">_∘_</a><a id="444" class="Symbol">)</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Level.html" class="Module">Level</a>

<a id="465" class="Keyword">open</a> <a id="470" class="Keyword">import</a> <a id="477" href="Core.Container.html" class="Module">Core.Container</a> <a id="492" class="Keyword">using</a> <a id="498" class="Symbol">(</a><a id="499" href="Core.Container.html#1725" class="Record Operator">_⇿_</a> <a id="503" class="Symbol">;</a> <a id="505" href="Core.Container.html#2287" class="Function">⇿-sym</a><a id="510" class="Symbol">)</a>
<a id="512" class="Keyword">open</a> <a id="517" class="Keyword">import</a> <a id="524" href="Core.Extensionality.html" class="Module">Core.Extensionality</a>
<a id="544" class="Keyword">open</a> <a id="549" class="Keyword">import</a> <a id="556" href="Core.MonotonePredicate.html" class="Module">Core.MonotonePredicate</a> <a id="579" href="Effect.Base.html#715" class="Function">Effect</a> <a id="586" href="Effect.Inclusion.html#635" class="Function Operator">_≲_</a> <a id="590" class="Symbol">(</a><a id="591" href="Effect.Inclusion.html#762" class="Function">≲-preorder</a> <a id="602" class="Symbol">.</a><a id="603" href="Relation.Binary.Bundles.html#2133" class="Field">Preorder.isPreorder</a><a id="622" class="Symbol">)</a>

<a id="625" class="Keyword">module</a> <a id="632" href="Effect.Logic.html" class="Module">Effect.Logic</a> <a id="645" class="Keyword">where</a>

<a id="652" class="Keyword">module</a> <a id="Connectives"></a><a id="659" href="Effect.Logic.html#659" class="Module">Connectives</a> <a id="671" class="Keyword">where</a>

  <a id="680" class="Comment">-- Separating conjunction</a>
  <a id="708" class="Keyword">record</a> <a id="Connectives._✴_"></a><a id="715" href="Effect.Logic.html#715" class="Record Operator">_✴_</a> <a id="719" class="Symbol">{</a><a id="720" href="Effect.Logic.html#720" class="Bound">ℓ</a><a id="721" class="Symbol">}</a> <a id="723" class="Symbol">(</a><a id="724" href="Effect.Logic.html#724" class="Bound">P</a> <a id="726" href="Effect.Logic.html#726" class="Bound">Q</a> <a id="728" class="Symbol">:</a> <a id="730" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="735" href="Effect.Base.html#715" class="Function">Effect</a> <a id="742" href="Effect.Logic.html#720" class="Bound">ℓ</a><a id="743" class="Symbol">)</a> <a id="745" class="Symbol">(</a><a id="746" href="Effect.Logic.html#746" class="Bound">ε</a> <a id="748" class="Symbol">:</a> <a id="750" href="Effect.Base.html#715" class="Function">Effect</a><a id="756" class="Symbol">)</a> <a id="758" class="Symbol">:</a> <a id="760" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="764" class="Symbol">(</a><a id="765" href="Agda.Primitive.html#931" class="Primitive">suc</a> <a id="769" href="Level.html#512" class="Function">0ℓ</a> <a id="772" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="774" href="Effect.Logic.html#720" class="Bound">ℓ</a><a id="775" class="Symbol">)</a> <a id="777" class="Keyword">where</a> 
    <a id="788" class="Keyword">constructor</a> <a id="Connectives._✴⟨_⟩_"></a><a id="800" href="Effect.Logic.html#800" class="InductiveConstructor Operator">_✴⟨_⟩_</a>
    <a id="811" class="Keyword">field</a>
      <a id="823" class="Symbol">{</a><a id="Connectives._✴_.εₗ"></a><a id="824" href="Effect.Logic.html#824" class="Field">εₗ</a> <a id="Connectives._✴_.εᵣ"></a><a id="827" href="Effect.Logic.html#827" class="Field">εᵣ</a><a id="829" class="Symbol">}</a> <a id="831" class="Symbol">:</a> <a id="833" href="Effect.Base.html#715" class="Function">Effect</a>
      <a id="Connectives._✴_.px"></a><a id="846" href="Effect.Logic.html#846" class="Field">px</a>  <a id="850" class="Symbol">:</a> <a id="852" href="Effect.Logic.html#724" class="Bound">P</a> <a id="854" href="Effect.Logic.html#824" class="Field">εₗ</a>
      <a id="Connectives._✴_.sep"></a><a id="863" href="Effect.Logic.html#863" class="Field">sep</a> <a id="867" class="Symbol">:</a> <a id="869" href="Effect.Logic.html#824" class="Field">εₗ</a> <a id="872" href="Effect.Separation.html#1325" class="Function Operator">∙</a> <a id="874" href="Effect.Logic.html#827" class="Field">εᵣ</a> <a id="877" href="Effect.Separation.html#1325" class="Function Operator">≈</a> <a id="879" href="Effect.Logic.html#746" class="Bound">ε</a>
      <a id="Connectives._✴_.qx"></a><a id="887" href="Effect.Logic.html#887" class="Field">qx</a>  <a id="891" class="Symbol">:</a> <a id="893" href="Effect.Logic.html#726" class="Bound">Q</a> <a id="895" href="Effect.Logic.html#827" class="Field">εᵣ</a>  

  <a id="903" class="Comment">-- Separating implication, or, the &quot;magic wand&quot; </a>
  <a id="954" class="Keyword">record</a> <a id="Connectives._─✴_"></a><a id="961" href="Effect.Logic.html#961" class="Record Operator">_─✴_</a> <a id="966" class="Symbol">{</a><a id="967" href="Effect.Logic.html#967" class="Bound">ℓ</a><a id="968" class="Symbol">}</a> <a id="970" class="Symbol">(</a><a id="971" href="Effect.Logic.html#971" class="Bound">P</a> <a id="973" href="Effect.Logic.html#973" class="Bound">Q</a> <a id="975" class="Symbol">:</a> <a id="977" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="982" href="Effect.Base.html#715" class="Function">Effect</a> <a id="989" href="Effect.Logic.html#967" class="Bound">ℓ</a><a id="990" class="Symbol">)</a> <a id="992" class="Symbol">(</a><a id="993" href="Effect.Logic.html#993" class="Bound">x</a> <a id="995" class="Symbol">:</a> <a id="997" href="Effect.Base.html#715" class="Function">Effect</a><a id="1003" class="Symbol">)</a> <a id="1005" class="Symbol">:</a> <a id="1007" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1011" class="Symbol">(</a><a id="1012" href="Agda.Primitive.html#931" class="Primitive">suc</a> <a id="1016" href="Level.html#512" class="Function">0ℓ</a> <a id="1019" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="1021" href="Effect.Logic.html#967" class="Bound">ℓ</a><a id="1022" class="Symbol">)</a> <a id="1024" class="Keyword">where</a>
    <a id="1034" class="Keyword">constructor</a> <a id="Connectives.wand"></a><a id="1046" href="Effect.Logic.html#1046" class="InductiveConstructor">wand</a>
    <a id="1055" class="Keyword">field</a>
      <a id="Connectives._─✴_._⟨_⟩_"></a><a id="1067" href="Effect.Logic.html#1067" class="Field Operator">_⟨_⟩_</a> <a id="1073" class="Symbol">:</a> <a id="1075" class="Symbol">∀</a> <a id="1077" class="Symbol">{</a><a id="1078" href="Effect.Logic.html#1078" class="Bound">c₁</a> <a id="1081" href="Effect.Logic.html#1081" class="Bound">c₂</a><a id="1083" class="Symbol">}</a> <a id="1085" class="Symbol">→</a> <a id="1087" href="Effect.Logic.html#993" class="Bound">x</a> <a id="1089" href="Effect.Separation.html#1325" class="Function Operator">∙</a> <a id="1091" href="Effect.Logic.html#1078" class="Bound">c₁</a> <a id="1094" href="Effect.Separation.html#1325" class="Function Operator">≈</a> <a id="1096" href="Effect.Logic.html#1081" class="Bound">c₂</a> <a id="1099" class="Symbol">→</a> <a id="1101" href="Effect.Logic.html#971" class="Bound">P</a> <a id="1103" href="Effect.Logic.html#1078" class="Bound">c₁</a> <a id="1106" class="Symbol">→</a> <a id="1108" href="Effect.Logic.html#973" class="Bound">Q</a> <a id="1110" href="Effect.Logic.html#1081" class="Bound">c₂</a>
  
  <a id="1118" class="Keyword">open</a> <a id="1123" href="Effect.Logic.html#715" class="Module Operator">_✴_</a>  <a id="1128" class="Keyword">public</a> 
  <a id="1138" class="Keyword">open</a> <a id="1143" href="Effect.Logic.html#961" class="Module Operator">_─✴_</a> <a id="1148" class="Keyword">public</a> 

  <a id="1159" class="Keyword">variable</a>
    <a id="1172" href="Effect.Logic.html#1172" class="Generalizable">ℓ</a> <a id="1174" class="Symbol">:</a> <a id="1176" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="1186" class="Comment">--P Q P₁ P₂ P′ Q₁ Q₂ Q′ : Effect → Set ℓ</a>

  <a id="1230" class="Comment">-- Separating implication is right-adjoint to separating conjunction, as</a>
  <a id="1305" class="Comment">-- witnessed by the following functions (which should be inverses)</a>
  
  <a id="Connectives.✴-curry"></a><a id="1377" href="Effect.Logic.html#1377" class="Function">✴-curry</a> <a id="1385" class="Symbol">:</a> <a id="1387" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="1390" class="Symbol">(</a><a id="1391" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="1394" href="Effect.Logic.html#715" class="Record Operator">✴</a> <a id="1396" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a><a id="1398" class="Symbol">)</a> <a id="1400" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="1402" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="1404" href="Relation.Unary.html#3498" class="Function">]</a> <a id="1406" class="Symbol">→</a> <a id="1408" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="1411" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="1414" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="1416" class="Symbol">(</a><a id="1417" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a> <a id="1420" href="Effect.Logic.html#961" class="Record Operator">─✴</a> <a id="1423" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a><a id="1424" class="Symbol">)</a> <a id="1426" href="Relation.Unary.html#3498" class="Function">]</a>
  <a id="1430" href="Effect.Logic.html#1377" class="Function">✴-curry</a> <a id="1438" href="Effect.Logic.html#1438" class="Bound">f</a> <a id="1440" href="Effect.Logic.html#1440" class="Bound">px₁</a> <a id="1444" class="Symbol">=</a> <a id="1446" href="Effect.Logic.html#1046" class="InductiveConstructor">wand</a> <a id="1451" class="Symbol">(λ</a> <a id="1454" href="Effect.Logic.html#1454" class="Bound">σ</a> <a id="1456" href="Effect.Logic.html#1456" class="Bound">px₂</a> <a id="1460" class="Symbol">→</a> <a id="1462" href="Effect.Logic.html#1438" class="Bound">f</a> <a id="1464" class="Symbol">(</a><a id="1465" href="Effect.Logic.html#1440" class="Bound">px₁</a> <a id="1469" href="Effect.Logic.html#800" class="InductiveConstructor Operator">✴⟨</a> <a id="1472" href="Effect.Logic.html#1454" class="Bound">σ</a> <a id="1474" href="Effect.Logic.html#800" class="InductiveConstructor Operator">⟩</a> <a id="1476" href="Effect.Logic.html#1456" class="Bound">px₂</a><a id="1479" class="Symbol">))</a>
                                                 
  <a id="Connectives.✴-uncurry"></a><a id="1534" href="Effect.Logic.html#1534" class="Function">✴-uncurry</a> <a id="1544" class="Symbol">:</a> <a id="1546" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="1549" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="1552" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="1554" class="Symbol">(</a><a id="1555" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a> <a id="1558" href="Effect.Logic.html#961" class="Record Operator">─✴</a> <a id="1561" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a><a id="1562" class="Symbol">)</a> <a id="1564" href="Relation.Unary.html#3498" class="Function">]</a> <a id="1566" class="Symbol">→</a> <a id="1568" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="1571" class="Symbol">(</a><a id="1572" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="1575" href="Effect.Logic.html#715" class="Record Operator">✴</a> <a id="1577" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a><a id="1579" class="Symbol">)</a> <a id="1581" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="1583" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="1585" href="Relation.Unary.html#3498" class="Function">]</a>
  <a id="1589" href="Effect.Logic.html#1534" class="Function">✴-uncurry</a> <a id="1599" href="Effect.Logic.html#1599" class="Bound">f</a> <a id="1601" class="Symbol">(</a><a id="1602" href="Effect.Logic.html#1602" class="Bound">px₁</a> <a id="1606" href="Effect.Logic.html#800" class="InductiveConstructor Operator">✴⟨</a> <a id="1609" href="Effect.Logic.html#1609" class="Bound">σ</a> <a id="1611" href="Effect.Logic.html#800" class="InductiveConstructor Operator">⟩</a> <a id="1613" href="Effect.Logic.html#1613" class="Bound">px₂</a><a id="1616" class="Symbol">)</a> <a id="1618" class="Symbol">=</a> <a id="1620" href="Effect.Logic.html#1599" class="Bound">f</a> <a id="1622" href="Effect.Logic.html#1602" class="Bound">px₁</a> <a id="1626" href="Effect.Logic.html#1067" class="Field Operator">⟨</a> <a id="1628" href="Effect.Logic.html#1609" class="Bound">σ</a> <a id="1630" href="Effect.Logic.html#1067" class="Field Operator">⟩</a> <a id="1632" href="Effect.Logic.html#1613" class="Bound">px₂</a>

  <a id="1639" class="Comment">-- Some this I have yet to verify, and all of it is digression. But some</a>
  <a id="1714" class="Comment">-- remarks:</a>
  <a id="1728" class="Comment">--</a>
  <a id="1733" class="Comment">-- The currying/uncurring functions above witness that the category of</a>
  <a id="1806" class="Comment">-- monotone predicates over effects has a closed monoidal structure, with ✷ as</a>
  <a id="1887" class="Comment">-- the tensor product.</a>
  <a id="1912" class="Comment">--</a>
  <a id="1917" class="Comment">-- Later, we will see that this is not the only closed monoidal structure on</a>
  <a id="1996" class="Comment">-- this category. In fact, the &quot;regular&quot; (i.e., non-separating) conjunction of</a>
  <a id="2077" class="Comment">-- predicates also has a right adjoint: the Kripke function space!</a>
  <a id="2146" class="Comment">--</a>
  <a id="2151" class="Comment">-- One might wonder what sets these monoidal structures apart. Squinting a</a>
  <a id="2228" class="Comment">-- little, we can see that the definition of separating conjunction above is</a>
  <a id="2307" class="Comment">-- strikinly similar to how Day&#39;s convolution product is computed using</a>
  <a id="2381" class="Comment">-- coends. The immediate follow-up question is wether separating conjunction</a>
  <a id="2460" class="Comment">-- preserves the monoidal structure of its inputs. If so, it, together with</a>
  <a id="2538" class="Comment">-- the magic wand (whose definition, incidently, precisely mimics how the</a>
  <a id="2614" class="Comment">-- right adjoint of the Day convolution product is usually computed in terms</a>
  <a id="2693" class="Comment">-- of ends) defines a closed monoidal structure on the category of monotone</a>
  <a id="2771" class="Comment">-- *monoidal* predicates over effects. </a>
  

  <a id="2817" class="Comment">{- Boxes and diamonds -}</a> 
  
  
  <a id="2851" class="Comment">-- The posibility modality. One way to think about posibility is as a unary</a>
  <a id="2929" class="Comment">-- version of separating conjunction. </a>
  <a id="2970" class="Keyword">record</a> <a id="Connectives.◇"></a><a id="2977" href="Effect.Logic.html#2977" class="Record">◇</a> <a id="2979" class="Symbol">(</a><a id="2980" href="Effect.Logic.html#2980" class="Bound">P</a> <a id="2982" class="Symbol">:</a> <a id="2984" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="2989" href="Effect.Base.html#715" class="Function">Effect</a> <a id="2996" href="Effect.Logic.html#1172" class="Generalizable">ℓ</a><a id="2997" class="Symbol">)</a> <a id="2999" class="Symbol">(</a><a id="3000" href="Effect.Logic.html#3000" class="Bound">x</a> <a id="3002" class="Symbol">:</a> <a id="3004" href="Effect.Base.html#715" class="Function">Effect</a><a id="3010" class="Symbol">)</a> <a id="3012" class="Symbol">:</a> <a id="3014" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3018" class="Symbol">(</a><a id="3019" href="Agda.Primitive.html#931" class="Primitive">suc</a> <a id="3023" href="Level.html#512" class="Function">0ℓ</a> <a id="3026" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="3028" href="Effect.Logic.html#2996" class="Bound">ℓ</a><a id="3029" class="Symbol">)</a> <a id="3031" class="Keyword">where</a>
    <a id="3041" class="Keyword">constructor</a> <a id="Connectives.◇⟨_⟩_"></a><a id="3053" href="Effect.Logic.html#3053" class="InductiveConstructor Operator">◇⟨_⟩_</a> 
    <a id="3064" class="Keyword">field</a>
      <a id="3076" class="Symbol">{</a><a id="Connectives.◇.x′"></a><a id="3077" href="Effect.Logic.html#3077" class="Field">x′</a><a id="3079" class="Symbol">}</a>    <a id="3084" class="Symbol">:</a> <a id="3086" href="Effect.Base.html#715" class="Function">Effect</a>
      <a id="Connectives.◇.i"></a><a id="3099" href="Effect.Logic.html#3099" class="Field">i</a>       <a id="3107" class="Symbol">:</a> <a id="3109" href="Effect.Logic.html#3077" class="Field">x′</a> <a id="3112" href="Effect.Inclusion.html#635" class="Function Operator">≲</a> <a id="3114" href="Effect.Logic.html#3000" class="Bound">x</a> 
      <a id="Connectives.◇.px"></a><a id="3123" href="Effect.Logic.html#3123" class="Field">px</a>      <a id="3131" class="Symbol">:</a> <a id="3133" href="Effect.Logic.html#2980" class="Bound">P</a> <a id="3135" href="Effect.Logic.html#3077" class="Field">x′</a> 
  
  <a id="3144" class="Keyword">open</a> <a id="3149" href="Effect.Logic.html#2977" class="Module">◇</a> <a id="3151" class="Keyword">public</a> 
  
  <a id="3164" class="Comment">-- The necessity modality. In a similar spirit, we can view necessity as a unary</a>
  <a id="3247" class="Comment">-- version of separating implication.</a>
  <a id="3287" class="Keyword">record</a> <a id="Connectives.□"></a><a id="3294" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3296" class="Symbol">(</a><a id="3297" href="Effect.Logic.html#3297" class="Bound">P</a> <a id="3299" class="Symbol">:</a> <a id="3301" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="3306" href="Effect.Base.html#715" class="Function">Effect</a> <a id="3313" href="Effect.Logic.html#1172" class="Generalizable">ℓ</a><a id="3314" class="Symbol">)</a> <a id="3316" class="Symbol">(</a><a id="3317" href="Effect.Logic.html#3317" class="Bound">x</a> <a id="3319" class="Symbol">:</a> <a id="3321" href="Effect.Base.html#715" class="Function">Effect</a><a id="3327" class="Symbol">)</a> <a id="3329" class="Symbol">:</a> <a id="3331" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3335" class="Symbol">(</a><a id="3336" href="Agda.Primitive.html#931" class="Primitive">suc</a> <a id="3340" href="Level.html#512" class="Function">0ℓ</a> <a id="3343" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="3345" href="Effect.Logic.html#3313" class="Bound">ℓ</a><a id="3346" class="Symbol">)</a> <a id="3348" class="Keyword">where</a>
    <a id="3358" class="Keyword">constructor</a> <a id="Connectives.necessary"></a><a id="3370" href="Effect.Logic.html#3370" class="InductiveConstructor">necessary</a> 
    <a id="3385" class="Keyword">field</a>
      <a id="Connectives.□.□⟨_⟩_"></a><a id="3397" href="Effect.Logic.html#3397" class="Field Operator">□⟨_⟩_</a> <a id="3403" class="Symbol">:</a> <a id="3405" class="Symbol">∀</a> <a id="3407" class="Symbol">{</a><a id="3408" href="Effect.Logic.html#3408" class="Bound">x′</a><a id="3410" class="Symbol">}</a> <a id="3412" class="Symbol">→</a> <a id="3414" href="Effect.Logic.html#3317" class="Bound">x</a> <a id="3416" href="Effect.Inclusion.html#635" class="Function Operator">≲</a> <a id="3418" href="Effect.Logic.html#3408" class="Bound">x′</a> <a id="3421" class="Symbol">→</a> <a id="3423" href="Effect.Logic.html#3297" class="Bound">P</a> <a id="3425" href="Effect.Logic.html#3408" class="Bound">x′</a>
  
  <a id="3433" class="Keyword">open</a> <a id="3438" href="Effect.Logic.html#3294" class="Module">□</a> <a id="3440" class="Keyword">public</a> 

  <a id="Connectives.□-extract"></a><a id="3451" href="Effect.Logic.html#3451" class="Function">□-extract</a> <a id="3461" class="Symbol">:</a> <a id="3463" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="3466" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3468" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="3470" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="3472" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="3474" href="Relation.Unary.html#3498" class="Function">]</a>
  <a id="3478" href="Effect.Logic.html#3451" class="Function">□-extract</a> <a id="3488" href="Effect.Logic.html#3488" class="Bound">px</a> <a id="3491" class="Symbol">=</a> <a id="3493" href="Effect.Logic.html#3397" class="Field Operator">□⟨</a> <a id="3496" href="Effect.Logic.html#3488" class="Bound">px</a> <a id="3499" href="Effect.Logic.html#3397" class="Field Operator">⟩</a> <a id="3501" href="Effect.Inclusion.html#675" class="Function">≲-refl</a> 

  <a id="Connectives.□-duplicate"></a><a id="3512" href="Effect.Logic.html#3512" class="Function">□-duplicate</a> <a id="3524" class="Symbol">:</a> <a id="3526" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="3529" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3531" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="3533" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="3535" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3537" class="Symbol">(</a><a id="3538" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3540" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="3542" class="Symbol">)</a> <a id="3544" href="Relation.Unary.html#3498" class="Function">]</a>
  <a id="3548" href="Effect.Logic.html#3512" class="Function">□-duplicate</a> <a id="3560" href="Effect.Logic.html#3560" class="Bound">px</a> <a id="3563" class="Symbol">=</a> <a id="3565" href="Effect.Logic.html#3370" class="InductiveConstructor">necessary</a> <a id="3575" class="Symbol">(λ</a> <a id="3578" href="Effect.Logic.html#3578" class="Bound">i</a> <a id="3580" class="Symbol">→</a> <a id="3582" href="Effect.Logic.html#3370" class="InductiveConstructor">necessary</a> <a id="3592" class="Symbol">(λ</a> <a id="3595" href="Effect.Logic.html#3595" class="Bound">i′</a> <a id="3598" class="Symbol">→</a> <a id="3600" href="Effect.Logic.html#3397" class="Field Operator">□⟨</a> <a id="3603" href="Effect.Logic.html#3560" class="Bound">px</a> <a id="3606" href="Effect.Logic.html#3397" class="Field Operator">⟩</a> <a id="3608" href="Effect.Inclusion.html#720" class="Function">≲-trans</a> <a id="3616" href="Effect.Logic.html#3578" class="Bound">i</a> <a id="3618" href="Effect.Logic.html#3595" class="Bound">i′</a><a id="3620" class="Symbol">))</a> 


  <a id="3628" class="Comment">-- All necessities are monotone by default, if the stored function space</a>
  <a id="3703" class="Comment">-- respects equivalence of inclusion witnesses</a>
  <a id="3752" class="Keyword">instance</a> <a id="Connectives.□-monotone"></a><a id="3761" href="Effect.Logic.html#3761" class="Function">□-monotone</a> <a id="3772" class="Symbol">:</a> <a id="3774" href="Core.MonotonePredicate.html#1473" class="Record">Monotone</a> <a id="3783" class="Symbol">(</a><a id="3784" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3786" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a><a id="3787" class="Symbol">)</a>
  <a id="3791" href="Effect.Logic.html#3761" class="Function">□-monotone</a> <a id="3802" class="Symbol">.</a><a id="3803" href="Core.MonotonePredicate.html#1535" class="Field">weaken</a> <a id="3810" href="Effect.Logic.html#3810" class="Bound">i</a> <a id="3812" href="Effect.Logic.html#3812" class="Bound">px</a> <a id="3815" class="Symbol">=</a>
    <a id="3821" href="Effect.Logic.html#3370" class="InductiveConstructor">necessary</a> <a id="3831" class="Symbol">(λ</a> <a id="3834" href="Effect.Logic.html#3834" class="Bound">i′</a> <a id="3837" class="Symbol">→</a> <a id="3839" href="Effect.Logic.html#3397" class="Field Operator">□⟨</a> <a id="3842" href="Effect.Logic.html#3812" class="Bound">px</a> <a id="3845" href="Effect.Logic.html#3397" class="Field Operator">⟩</a> <a id="3847" href="Effect.Inclusion.html#720" class="Function">≲-trans</a> <a id="3855" href="Effect.Logic.html#3810" class="Bound">i</a> <a id="3857" href="Effect.Logic.html#3834" class="Bound">i′</a><a id="3859" class="Symbol">)</a> 
  
  <a id="Connectives.□-resp-⇿"></a><a id="3867" href="Effect.Logic.html#3867" class="Function">□-resp-⇿</a> <a id="3876" class="Symbol">:</a> <a id="3878" href="Effect.Base.html#901" class="Generalizable">ε₁</a> <a id="3881" href="Core.Container.html#1725" class="Record Operator">⇿</a> <a id="3883" href="Effect.Base.html#904" class="Generalizable">ε₂</a> <a id="3886" class="Symbol">→</a> <a id="3888" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3890" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="3892" href="Effect.Base.html#901" class="Generalizable">ε₁</a> <a id="3895" class="Symbol">→</a> <a id="3897" href="Effect.Logic.html#3294" class="Record">□</a> <a id="3899" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="3901" href="Effect.Base.html#904" class="Generalizable">ε₂</a>
  <a id="3906" href="Effect.Logic.html#3867" class="Function">□-resp-⇿</a> <a id="3915" href="Effect.Logic.html#3915" class="Bound">eq</a> <a id="3918" href="Effect.Logic.html#3918" class="Bound">px</a> <a id="3921" class="Symbol">=</a> <a id="3923" href="Effect.Logic.html#3370" class="InductiveConstructor">necessary</a> <a id="3933" class="Symbol">(λ</a> <a id="3936" href="Effect.Logic.html#3936" class="Bound">i</a> <a id="3938" class="Symbol">→</a> <a id="3940" href="Effect.Logic.html#3397" class="Field Operator">□⟨</a> <a id="3943" href="Effect.Logic.html#3918" class="Bound">px</a> <a id="3946" href="Effect.Logic.html#3397" class="Field Operator">⟩</a> <a id="3948" href="Effect.Inclusion.html#1213" class="Function">≲-respects-⇿ˡ</a> <a id="3962" class="Symbol">(</a><a id="3963" href="Core.Container.html#2287" class="Function">⇿-sym</a> <a id="3969" href="Effect.Logic.html#3915" class="Bound">eq</a><a id="3971" class="Symbol">)</a> <a id="3973" href="Effect.Logic.html#3936" class="Bound">i</a><a id="3974" class="Symbol">)</a>

  <a id="3979" class="Comment">-- Box and diamond are adjoint functors on the category of monotone predicates</a>
  
  <a id="Connectives.mod-curry"></a><a id="4063" href="Effect.Logic.html#4063" class="Function">mod-curry</a> <a id="4073" class="Symbol">:</a> <a id="4075" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4078" href="Effect.Logic.html#2977" class="Record">◇</a> <a id="4080" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="4082" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4084" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="4086" href="Relation.Unary.html#3498" class="Function">]</a> <a id="4088" class="Symbol">→</a> <a id="4090" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4093" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="4095" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4097" href="Effect.Logic.html#3294" class="Record">□</a> <a id="4099" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="4101" href="Relation.Unary.html#3498" class="Function">]</a>
  <a id="4105" href="Effect.Logic.html#4063" class="Function">mod-curry</a> <a id="4115" href="Effect.Logic.html#4115" class="Bound">f</a> <a id="4117" href="Effect.Logic.html#4117" class="Bound">px</a> <a id="4120" class="Symbol">=</a> <a id="4122" href="Effect.Logic.html#3370" class="InductiveConstructor">necessary</a> <a id="4132" class="Symbol">(λ</a> <a id="4135" href="Effect.Logic.html#4135" class="Bound">i</a> <a id="4137" class="Symbol">→</a> <a id="4139" href="Effect.Logic.html#4115" class="Bound">f</a> <a id="4141" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="4143" href="Effect.Logic.html#3053" class="InductiveConstructor Operator">◇⟨</a> <a id="4146" href="Effect.Logic.html#4135" class="Bound">i</a> <a id="4148" href="Effect.Logic.html#3053" class="InductiveConstructor Operator">⟩</a> <a id="4150" href="Effect.Logic.html#4117" class="Bound">px</a><a id="4152" class="Symbol">)</a>
  
  <a id="Connectives.mod-uncurry"></a><a id="4159" href="Effect.Logic.html#4159" class="Function">mod-uncurry</a> <a id="4171" class="Symbol">:</a> <a id="4173" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4176" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="4178" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4180" href="Effect.Logic.html#3294" class="Record">□</a> <a id="4182" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="4184" href="Relation.Unary.html#3498" class="Function">]</a> <a id="4186" class="Symbol">→</a> <a id="4188" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4191" href="Effect.Logic.html#2977" class="Record">◇</a> <a id="4193" href="Core.MonotonePredicate.html#1207" class="Generalizable">P</a> <a id="4195" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4197" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="4199" href="Relation.Unary.html#3498" class="Function">]</a>
  <a id="4203" href="Effect.Logic.html#4159" class="Function">mod-uncurry</a> <a id="4215" href="Effect.Logic.html#4215" class="Bound">f</a> <a id="4217" class="Symbol">(</a><a id="4218" href="Effect.Logic.html#3053" class="InductiveConstructor Operator">◇⟨</a> <a id="4221" href="Effect.Logic.html#4221" class="Bound">i</a> <a id="4223" href="Effect.Logic.html#3053" class="InductiveConstructor Operator">⟩</a> <a id="4225" href="Effect.Logic.html#4225" class="Bound">px</a><a id="4227" class="Symbol">)</a> <a id="4229" class="Symbol">=</a> <a id="4231" href="Effect.Logic.html#3397" class="Field Operator">□⟨</a> <a id="4234" href="Effect.Logic.html#4215" class="Bound">f</a> <a id="4236" href="Effect.Logic.html#4225" class="Bound">px</a> <a id="4239" href="Effect.Logic.html#3397" class="Field Operator">⟩</a> <a id="4241" href="Effect.Logic.html#4221" class="Bound">i</a>
  

  <a id="4249" class="Comment">-- A &quot;Kripke closed monoidal structure&quot; on the category of monotone predicates </a>
  
  <a id="4334" class="Comment">-- The &quot;Kripke exponent&quot; (or, Kripke function space) between two predicates is</a>
  <a id="4415" class="Comment">-- defined as the necessity of their implication.</a>
  <a id="Connectives._⇛_"></a><a id="4467" href="Effect.Logic.html#4467" class="Function Operator">_⇛_</a> <a id="4471" class="Symbol">:</a> <a id="4473" class="Symbol">(</a><a id="4474" href="Effect.Logic.html#4474" class="Bound">P</a> <a id="4476" href="Effect.Logic.html#4476" class="Bound">Q</a> <a id="4478" class="Symbol">:</a> <a id="4480" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="4485" href="Effect.Base.html#715" class="Function">Effect</a> <a id="4492" href="Effect.Logic.html#1172" class="Generalizable">ℓ</a><a id="4493" class="Symbol">)</a> <a id="4495" class="Symbol">→</a> <a id="4497" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="4502" href="Effect.Base.html#715" class="Function">Effect</a> <a id="4509" class="Symbol">(</a><a id="4510" href="Agda.Primitive.html#931" class="Primitive">suc</a> <a id="4514" href="Level.html#512" class="Function">0ℓ</a> <a id="4517" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="4519" href="Effect.Logic.html#1172" class="Generalizable">ℓ</a><a id="4520" class="Symbol">)</a> 
  <a id="4525" href="Effect.Logic.html#4525" class="Bound">P</a> <a id="4527" href="Effect.Logic.html#4467" class="Function Operator">⇛</a> <a id="4529" href="Effect.Logic.html#4529" class="Bound">Q</a> <a id="4531" class="Symbol">=</a> <a id="4533" href="Effect.Logic.html#3294" class="Record">□</a> <a id="4535" class="Symbol">(</a><a id="4536" href="Effect.Logic.html#4525" class="Bound">P</a> <a id="4538" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4540" href="Effect.Logic.html#4529" class="Bound">Q</a><a id="4541" class="Symbol">)</a> 
  
  <a id="Connectives.kripke-curry"></a><a id="4549" href="Effect.Logic.html#4549" class="Function">kripke-curry</a> <a id="4562" class="Symbol">:</a> <a id="4564" class="Symbol">⦃</a> <a id="4566" href="Core.MonotonePredicate.html#1473" class="Record">Monotone</a> <a id="4575" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="4578" class="Symbol">⦄</a> <a id="4580" class="Symbol">→</a> <a id="4582" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4585" class="Symbol">(</a><a id="4586" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="4589" href="Relation.Unary.html#4655" class="Function Operator">∩</a> <a id="4591" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a><a id="4593" class="Symbol">)</a> <a id="4595" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4597" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="4599" href="Relation.Unary.html#3498" class="Function">]</a> <a id="4601" class="Symbol">→</a> <a id="4603" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4606" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="4609" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4611" class="Symbol">(</a><a id="4612" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a> <a id="4615" href="Effect.Logic.html#4467" class="Function Operator">⇛</a> <a id="4617" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a><a id="4618" class="Symbol">)</a> <a id="4620" href="Relation.Unary.html#3498" class="Function">]</a> 
  <a id="4625" href="Effect.Logic.html#4549" class="Function">kripke-curry</a> <a id="4638" href="Effect.Logic.html#4638" class="Bound">f</a> <a id="4640" href="Effect.Logic.html#4640" class="Bound">px₁</a> <a id="4644" class="Symbol">=</a> <a id="4646" href="Effect.Logic.html#3370" class="InductiveConstructor">necessary</a> <a id="4656" class="Symbol">(λ</a> <a id="4659" href="Effect.Logic.html#4659" class="Bound">i</a> <a id="4661" href="Effect.Logic.html#4661" class="Bound">px₂</a> <a id="4665" class="Symbol">→</a> <a id="4667" href="Effect.Logic.html#4638" class="Bound">f</a> <a id="4669" class="Symbol">(</a><a id="4670" href="Core.MonotonePredicate.html#1535" class="Field">weaken</a> <a id="4677" href="Effect.Logic.html#4659" class="Bound">i</a> <a id="4679" href="Effect.Logic.html#4640" class="Bound">px₁</a> <a id="4683" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4685" href="Effect.Logic.html#4661" class="Bound">px₂</a><a id="4688" class="Symbol">))</a>
  
  <a id="Connectives.kripke-uncurry"></a><a id="4696" href="Effect.Logic.html#4696" class="Function">kripke-uncurry</a> <a id="4711" class="Symbol">:</a> <a id="4713" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4716" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="4719" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4721" class="Symbol">(</a><a id="4722" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a> <a id="4725" href="Effect.Logic.html#4467" class="Function Operator">⇛</a> <a id="4727" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a><a id="4728" class="Symbol">)</a> <a id="4730" href="Relation.Unary.html#3498" class="Function">]</a> <a id="4732" class="Symbol">→</a> <a id="4734" href="Relation.Unary.html#3498" class="Function">∀[</a> <a id="4737" class="Symbol">(</a><a id="4738" href="Core.MonotonePredicate.html#1211" class="Generalizable">P₁</a> <a id="4741" href="Relation.Unary.html#4655" class="Function Operator">∩</a> <a id="4743" href="Core.MonotonePredicate.html#1214" class="Generalizable">P₂</a><a id="4745" class="Symbol">)</a> <a id="4747" href="Relation.Unary.html#4490" class="Function Operator">⇒</a> <a id="4749" href="Core.MonotonePredicate.html#1209" class="Generalizable">Q</a> <a id="4751" href="Relation.Unary.html#3498" class="Function">]</a> 
  <a id="4756" href="Effect.Logic.html#4696" class="Function">kripke-uncurry</a> <a id="4771" href="Effect.Logic.html#4771" class="Bound">f</a> <a id="4773" class="Symbol">(</a><a id="4774" href="Effect.Logic.html#4774" class="Bound">px₁</a> <a id="4778" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4780" href="Effect.Logic.html#4780" class="Bound">px₂</a><a id="4783" class="Symbol">)</a> <a id="4785" class="Symbol">=</a> <a id="4787" href="Effect.Logic.html#3397" class="Field Operator">□⟨</a> <a id="4790" href="Effect.Logic.html#4771" class="Bound">f</a> <a id="4792" href="Effect.Logic.html#4774" class="Bound">px₁</a> <a id="4796" href="Effect.Logic.html#3397" class="Field Operator">⟩</a> <a id="4798" href="Effect.Inclusion.html#675" class="Function">≲-refl</a> <a id="4805" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="4807" href="Effect.Logic.html#4780" class="Bound">px₂</a>
  
  
</pre></body></html>