<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Effect.Elaborate</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Symbol">#-}</a> 

<a id="31" class="Keyword">open</a> <a id="36" class="Keyword">import</a> <a id="43" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="59" class="Keyword">open</a> <a id="64" class="Keyword">import</a> <a id="71" href="Core.Functor.html" class="Module">Core.Functor</a>
<a id="84" class="Keyword">open</a> <a id="89" class="Keyword">import</a> <a id="96" href="Core.Functor.NaturalTransformation.html" class="Module">Core.Functor.NaturalTransformation</a>
<a id="131" class="Keyword">open</a> <a id="136" class="Keyword">import</a> <a id="143" href="Core.Functor.Monad.html" class="Module">Core.Functor.Monad</a>

<a id="163" class="Keyword">open</a> <a id="168" class="Keyword">import</a> <a id="175" href="Core.Ternary.html" class="Module">Core.Ternary</a>
<a id="188" class="Keyword">open</a> <a id="193" class="Keyword">import</a> <a id="200" href="Core.Container.html" class="Module">Core.Container</a>
<a id="215" class="Keyword">open</a> <a id="220" class="Keyword">import</a> <a id="227" href="Core.Signature.html" class="Module">Core.Signature</a>
<a id="242" class="Keyword">open</a> <a id="247" class="Keyword">import</a> <a id="254" href="Core.Extensionality.html" class="Module">Core.Extensionality</a>
<a id="274" class="Keyword">open</a> <a id="279" class="Keyword">import</a> <a id="286" href="Core.Logic.html" class="Module">Core.Logic</a>

<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Effect.Syntax.Free.html" class="Module">Effect.Syntax.Free</a>
<a id="329" class="Keyword">open</a> <a id="334" class="Keyword">import</a> <a id="341" href="Effect.Syntax.Hefty.html" class="Module">Effect.Syntax.Hefty</a>
<a id="361" class="Keyword">open</a> <a id="366" class="Keyword">import</a> <a id="373" href="Effect.Base.html" class="Module">Effect.Base</a>

<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Data.Empty.html" class="Module">Data.Empty</a> 
<a id="410" class="Keyword">open</a> <a id="415" class="Keyword">import</a> <a id="422" href="Data.Product.html" class="Module">Data.Product</a>
<a id="435" class="Keyword">open</a> <a id="440" class="Keyword">import</a> <a id="447" href="Data.Sum.html" class="Module">Data.Sum</a>

<a id="457" class="Keyword">open</a> <a id="462" class="Keyword">import</a> <a id="469" href="Effect.Relation.Ternary.FirstOrderSeparation.html" class="Module">Effect.Relation.Ternary.FirstOrderSeparation</a>
<a id="514" class="Keyword">open</a> <a id="519" class="Keyword">import</a> <a id="526" href="Effect.Relation.Binary.FirstOrderInclusion.html" class="Module">Effect.Relation.Binary.FirstOrderInclusion</a>
<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Effect.Relation.Ternary.HigherOrderSeparation.html" class="Module">Effect.Relation.Ternary.HigherOrderSeparation</a>
<a id="627" class="Keyword">open</a> <a id="632" class="Keyword">import</a> <a id="639" href="Effect.Relation.Binary.HigherOrderInclusion.html" class="Module">Effect.Relation.Binary.HigherOrderInclusion</a>

<a id="684" class="Keyword">open</a> <a id="689" class="Keyword">import</a> <a id="696" href="Effect.Theory.FirstOrder.html" class="Module">Effect.Theory.FirstOrder</a>

<a id="722" class="Keyword">open</a> <a id="727" class="Keyword">import</a> <a id="734" href="Function.html" class="Module">Function</a> <a id="743" class="Keyword">hiding</a> <a id="750" class="Symbol">(</a><a id="751" href="Function.Bundles.html#12400" class="Function Operator">_⇔_</a><a id="754" class="Symbol">)</a>

<a id="757" class="Keyword">open</a> <a id="762" class="Keyword">import</a> <a id="769" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="785" class="Keyword">using</a> <a id="791" class="Symbol">(</a><a id="792" href="Relation.Binary.Bundles.html#2136" class="Record">Preorder</a><a id="800" class="Symbol">)</a>
<a id="802" class="Keyword">open</a> <a id="807" class="Keyword">import</a> <a id="814" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="853" class="Keyword">open</a> <a id="858" class="Keyword">import</a> <a id="865" href="Effect.Handle.html" class="Module">Effect.Handle</a>

<a id="880" class="Keyword">module</a> <a id="887" href="Effect.Elaborate.html" class="Module">Effect.Elaborate</a> <a id="904" class="Keyword">where</a>

<a id="911" class="Keyword">open</a> <a id="916" class="Keyword">import</a> <a id="923" href="Core.MonotonePredicate.html" class="Module">Core.MonotonePredicate</a> <a id="946" href="Effect.Base.html#735" class="Function">Effect</a> <a id="953" href="Core.Ternary.html#666" class="Field Operator">_≲_</a> 

<a id="959" class="Comment">{- Semantics for higher-order effects -}</a>

<a id="S"></a><a id="1001" href="Effect.Elaborate.html#1001" class="Function">S</a> <a id="1003" class="Symbol">:</a> <a id="1005" class="Symbol">∀</a> <a id="1007" class="Symbol">{</a><a id="1008" href="Effect.Elaborate.html#1008" class="Bound">a</a> <a id="1010" href="Effect.Elaborate.html#1010" class="Bound">b</a> <a id="1012" href="Effect.Elaborate.html#1012" class="Bound">c</a><a id="1013" class="Symbol">}</a> <a id="1015" class="Symbol">{</a><a id="1016" href="Effect.Elaborate.html#1016" class="Bound">A</a> <a id="1018" class="Symbol">:</a> <a id="1020" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1024" href="Effect.Elaborate.html#1008" class="Bound">a</a><a id="1025" class="Symbol">}</a> <a id="1027" class="Symbol">{</a><a id="1028" href="Effect.Elaborate.html#1028" class="Bound">B</a> <a id="1030" class="Symbol">:</a> <a id="1032" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1036" href="Effect.Elaborate.html#1010" class="Bound">b</a><a id="1037" class="Symbol">}</a> <a id="1039" class="Symbol">{</a><a id="1040" href="Effect.Elaborate.html#1040" class="Bound">C</a> <a id="1042" class="Symbol">:</a> <a id="1044" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1048" href="Effect.Elaborate.html#1012" class="Bound">c</a><a id="1049" class="Symbol">}</a> <a id="1051" class="Symbol">→</a> <a id="1053" class="Symbol">(</a><a id="1054" href="Effect.Elaborate.html#1016" class="Bound">A</a> <a id="1056" class="Symbol">→</a> <a id="1058" href="Effect.Elaborate.html#1028" class="Bound">B</a> <a id="1060" class="Symbol">→</a> <a id="1062" href="Effect.Elaborate.html#1040" class="Bound">C</a><a id="1063" class="Symbol">)</a> <a id="1065" class="Symbol">→</a> <a id="1067" class="Symbol">(</a><a id="1068" href="Effect.Elaborate.html#1016" class="Bound">A</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="Effect.Elaborate.html#1028" class="Bound">B</a><a id="1073" class="Symbol">)</a> <a id="1075" class="Symbol">→</a> <a id="1077" href="Effect.Elaborate.html#1016" class="Bound">A</a> <a id="1079" class="Symbol">→</a> <a id="1081" href="Effect.Elaborate.html#1040" class="Bound">C</a>
<a id="1083" href="Effect.Elaborate.html#1001" class="Function">S</a> <a id="1085" class="Symbol">=</a> <a id="1087" class="Symbol">λ</a> <a id="1089" href="Effect.Elaborate.html#1089" class="Bound">x</a> <a id="1091" href="Effect.Elaborate.html#1091" class="Bound">y</a> <a id="1093" href="Effect.Elaborate.html#1093" class="Bound">z</a> <a id="1095" class="Symbol">→</a> <a id="1097" href="Effect.Elaborate.html#1089" class="Bound">x</a> <a id="1099" href="Effect.Elaborate.html#1093" class="Bound">z</a> <a id="1101" class="Symbol">(</a><a id="1102" href="Effect.Elaborate.html#1091" class="Bound">y</a> <a id="1104" href="Effect.Elaborate.html#1093" class="Bound">z</a><a id="1105" class="Symbol">)</a> 
  
<a id="1111" class="Keyword">record</a> <a id="Elaboration"></a><a id="1118" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="1130" class="Symbol">(</a><a id="1131" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="1133" class="Symbol">:</a> <a id="1135" href="Effect.Base.html#756" class="Function">Effectᴴ</a><a id="1142" class="Symbol">)</a> <a id="1144" class="Symbol">(</a><a id="1145" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="1147" class="Symbol">:</a> <a id="1149" href="Effect.Base.html#735" class="Function">Effect</a><a id="1155" class="Symbol">)</a> <a id="1157" class="Symbol">:</a> <a id="1159" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="1164" class="Keyword">where</a>
  <a id="1172" class="Keyword">field</a>
    <a id="Elaboration.elab"></a><a id="1182" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="1187" class="Symbol">:</a> <a id="1189" href="Core.Logic.html#2908" class="Record">□</a> <a id="1191" class="Symbol">(</a><a id="1192" href="Effect.Elaborate.html#1001" class="Function">S</a> <a id="1194" class="Symbol">(</a><a id="1195" href="Core.Signature.html#1127" class="Record">Algebra</a> <a id="1203" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1205" href="Effect.Elaborate.html#1131" class="Bound">η</a><a id="1206" class="Symbol">)</a> <a id="1208" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a><a id="1212" class="Symbol">)</a>  <a id="1215" href="Effect.Elaborate.html#1145" class="Bound">ε</a>
    

  <a id="Elaboration.elaborate"></a><a id="1225" href="Effect.Elaborate.html#1225" class="Function">elaborate</a> <a id="1235" class="Symbol">:</a> <a id="1237" href="Relation.Unary.html#3793" class="Function">∀[</a> <a id="1240" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="1246" class="Symbol">(</a><a id="1247" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="1249" href="Effect.Elaborate.html#1145" class="Bound">ε</a><a id="1250" class="Symbol">)</a> <a id="1252" href="Relation.Unary.html#5039" class="Function Operator">⇒</a> <a id="1254" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="1259" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="1261" href="Relation.Unary.html#3793" class="Function">]</a>
  <a id="1265" href="Effect.Elaborate.html#1225" class="Function">elaborate</a> <a id="1275" class="Symbol">=</a> <a id="1277" href="Effect.Syntax.Hefty.html#664" class="Function">fold-hefty</a> <a id="1288" href="Effect.Syntax.Free.html#529" class="InductiveConstructor">pure</a> <a id="1293" class="Symbol">(</a><a id="1294" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="1297" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="1302" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="1304" href="Effect.Relation.Binary.FirstOrderInclusion.html#844" class="Function">≲-refl</a><a id="1310" class="Symbol">)</a>   

  <a id="Elaboration.elaborate′"></a><a id="1318" href="Effect.Elaborate.html#1318" class="Function">elaborate′</a> <a id="1329" class="Symbol">:</a> <a id="1331" class="Symbol">⦃</a> <a id="1333" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="1335" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="1337" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="1340" class="Symbol">⦄</a> <a id="1342" class="Symbol">→</a> <a id="1344" href="Relation.Unary.html#3793" class="Function">∀[</a> <a id="1347" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="1353" class="Symbol">(</a><a id="1354" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="1356" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="1358" class="Symbol">)</a> <a id="1360" href="Relation.Unary.html#5039" class="Function Operator">⇒</a> <a id="1362" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="1367" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="1370" href="Relation.Unary.html#3793" class="Function">]</a>
  <a id="1374" href="Effect.Elaborate.html#1318" class="Function">elaborate′</a> <a id="1385" class="Symbol">⦃</a> <a id="1387" href="Effect.Elaborate.html#1387" class="Bound">i</a> <a id="1389" class="Symbol">⦄</a> <a id="1391" class="Symbol">=</a> <a id="1393" href="Effect.Syntax.Hefty.html#664" class="Function">fold-hefty</a> <a id="1404" href="Effect.Syntax.Free.html#529" class="InductiveConstructor">pure</a> <a id="1409" class="Symbol">(</a><a id="1410" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="1413" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="1418" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="1420" href="Effect.Elaborate.html#1387" class="Bound">i</a><a id="1421" class="Symbol">)</a>

  <a id="Elaboration.ℰ⟦_⟧"></a><a id="1426" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="1431" class="Symbol">=</a> <a id="1433" href="Effect.Elaborate.html#1318" class="Function">elaborate′</a>

  <a id="1447" class="Comment">-- Map `Hefty` continuations to `Free` continuations.</a>
  <a id="1503" class="Comment">--</a>
  <a id="1508" class="Comment">-- This witnesses that (the fold of) an elaboration algebra characterized by</a>
  <a id="1587" class="Comment">-- signatures `η` and `ε` defines a functor between the Kleisli categories of</a>
  <a id="1667" class="Comment">-- respectively the monads `Hefty (η ε)` and `Free ε`.</a>
  <a id="Elaboration.ℰ⟪_⟫"></a><a id="1724" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪_⟫</a> <a id="1729" class="Symbol">:</a> <a id="1731" class="Symbol">⦃</a> <a id="1733" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="1735" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="1737" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="1740" class="Symbol">⦄</a> <a id="1742" class="Symbol">→</a> <a id="1744" class="Symbol">(</a><a id="1745" href="Core.Functor.html#1514" class="Generalizable">A</a> <a id="1747" class="Symbol">→</a> <a id="1749" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="1755" class="Symbol">(</a><a id="1756" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="1758" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="1760" class="Symbol">)</a> <a id="1762" href="Core.Functor.html#1533" class="Generalizable">B</a><a id="1763" class="Symbol">)</a> <a id="1765" class="Symbol">→</a> <a id="1767" class="Symbol">(</a><a id="1768" href="Core.Functor.html#1514" class="Generalizable">A</a> <a id="1770" class="Symbol">→</a> <a id="1772" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="1777" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="1780" href="Core.Functor.html#1533" class="Generalizable">B</a><a id="1781" class="Symbol">)</a>
  <a id="1785" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="1788" href="Effect.Elaborate.html#1788" class="Bound">f</a> <a id="1790" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="1792" class="Symbol">=</a> <a id="1794" class="Symbol">λ</a> <a id="1796" href="Effect.Elaborate.html#1796" class="Bound">x</a> <a id="1798" class="Symbol">→</a> <a id="1800" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="1803" href="Effect.Elaborate.html#1788" class="Bound">f</a> <a id="1805" href="Effect.Elaborate.html#1796" class="Bound">x</a> <a id="1807" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a>   
   
  <a id="1818" class="Keyword">field</a>
    <a id="1828" class="Comment">-- Establishes that elaboration algebras commute with fmap in a suitable</a>
    <a id="1905" class="Comment">-- way. This allows us to show that elaborations are natural</a>
    <a id="1970" class="Comment">-- transformations.</a>
    <a id="Elaboration.commutes"></a><a id="1994" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="2003" class="Symbol">:</a>
      <a id="2011" class="Symbol">∀</a> <a id="2013" class="Symbol">{</a><a id="2014" href="Effect.Elaborate.html#2014" class="Bound">A</a> <a id="2016" href="Effect.Elaborate.html#2016" class="Bound">B</a> <a id="2018" class="Symbol">:</a> <a id="2020" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="2023" class="Symbol">}</a> <a id="2025" class="Symbol">{</a><a id="2026" href="Effect.Elaborate.html#2026" class="Bound">f</a> <a id="2028" class="Symbol">:</a> <a id="2030" href="Effect.Elaborate.html#2014" class="Bound">A</a> <a id="2032" class="Symbol">→</a> <a id="2034" href="Effect.Elaborate.html#2016" class="Bound">B</a><a id="2035" class="Symbol">}</a>
      <a id="2043" class="Symbol">→</a> <a id="2045" class="Symbol">(</a><a id="2046" href="Effect.Elaborate.html#2046" class="Bound">x</a> <a id="2048" class="Symbol">:</a> <a id="2050" href="Core.Signature.html#946" class="Record Operator">⟦</a> <a id="2052" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="2054" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="2057" href="Core.Signature.html#946" class="Record Operator">⟧</a> <a id="2059" class="Symbol">(</a><a id="2060" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="2065" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="2067" class="Symbol">)</a> <a id="2069" href="Effect.Elaborate.html#2014" class="Bound">A</a><a id="2070" class="Symbol">)</a>
        <a id="2080" class="Comment">--------------------------------------------------------------------------</a>
      <a id="2161" class="Symbol">→</a> <a id="2163" class="Symbol">⦃</a> <a id="2165" href="Effect.Elaborate.html#2165" class="Bound">i</a> <a id="2167" class="Symbol">:</a> <a id="2169" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="2171" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="2173" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="2176" class="Symbol">⦄</a> <a id="2178" class="Symbol">→</a> <a id="2180" class="Symbol">(</a><a id="2181" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="2184" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="2189" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="2191" href="Effect.Elaborate.html#2165" class="Bound">i</a><a id="2192" class="Symbol">)</a> <a id="2194" class="Symbol">.</a><a id="2195" href="Core.Signature.html#1174" class="Field">α</a> <a id="2197" class="Symbol">(</a><a id="2198" href="Core.Functor.html#495" class="Field">fmap</a> <a id="2203" href="Effect.Elaborate.html#2026" class="Bound">f</a> <a id="2205" href="Effect.Elaborate.html#2046" class="Bound">x</a><a id="2206" class="Symbol">)</a> <a id="2208" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2210" href="Core.Functor.html#495" class="Field">fmap</a> <a id="2215" href="Effect.Elaborate.html#2026" class="Bound">f</a> <a id="2217" class="Symbol">((</a><a id="2219" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="2222" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="2227" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="2229" href="Effect.Elaborate.html#2165" class="Bound">i</a><a id="2230" class="Symbol">)</a> <a id="2232" class="Symbol">.</a><a id="2233" href="Core.Signature.html#1174" class="Field">α</a> <a id="2235" href="Effect.Elaborate.html#2046" class="Bound">x</a><a id="2236" class="Symbol">)</a> 

    <a id="2244" class="Comment">-- Coherence property for elaboration algebras, establishing that</a>
    <a id="2314" class="Comment">-- elaboration algebras distribute over Kleisli composition in a suitable</a>
    <a id="2392" class="Comment">-- way. From this notion of coherence we can derive that elaborations are</a>
    <a id="2470" class="Comment">-- monad morhpisms between Hefty trees and the free monad.</a>
    <a id="Elaboration.coherent"></a><a id="2533" href="Effect.Elaborate.html#2533" class="Field">coherent</a> <a id="2542" class="Symbol">:</a>
      <a id="2550" class="Symbol">∀</a> <a id="2552" class="Symbol">{</a><a id="2553" href="Effect.Elaborate.html#2553" class="Bound">A</a> <a id="2555" href="Effect.Elaborate.html#2555" class="Bound">B</a> <a id="2557" href="Effect.Elaborate.html#2557" class="Bound">ε′</a> <a id="2560" href="Effect.Elaborate.html#2560" class="Bound">c</a> <a id="2562" href="Effect.Elaborate.html#2562" class="Bound">s</a><a id="2563" class="Symbol">}</a> <a id="2565" class="Symbol">→</a> <a id="2567" class="Symbol">⦃</a> <a id="2569" href="Effect.Elaborate.html#2569" class="Bound">i</a> <a id="2571" class="Symbol">:</a> <a id="2573" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="2575" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="2577" href="Effect.Elaborate.html#2557" class="Bound">ε′</a> <a id="2580" class="Symbol">⦄</a>
      <a id="2588" class="Symbol">→</a> <a id="2590" class="Symbol">(</a><a id="2591" href="Effect.Elaborate.html#2591" class="Bound">k₁</a> <a id="2594" class="Symbol">:</a> <a id="2596" href="Core.Signature.html#750" class="Field">response</a> <a id="2605" class="Symbol">(</a><a id="2606" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="2608" class="Symbol">_)</a> <a id="2611" href="Effect.Elaborate.html#2560" class="Bound">c</a> <a id="2613" class="Symbol">→</a> <a id="2615" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="2620" href="Effect.Elaborate.html#2557" class="Bound">ε′</a> <a id="2623" href="Effect.Elaborate.html#2553" class="Bound">A</a><a id="2624" class="Symbol">)</a>
      <a id="2632" class="Symbol">→</a> <a id="2634" class="Symbol">(</a><a id="2635" href="Effect.Elaborate.html#2635" class="Bound">k₂</a> <a id="2638" class="Symbol">:</a> <a id="2640" href="Effect.Elaborate.html#2553" class="Bound">A</a> <a id="2642" class="Symbol">→</a> <a id="2644" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="2649" href="Effect.Elaborate.html#2557" class="Bound">ε′</a> <a id="2652" href="Effect.Elaborate.html#2555" class="Bound">B</a><a id="2653" class="Symbol">)</a>
        <a id="2663" class="Comment">-------------------------------------------------------------------------------</a>
      <a id="2749" class="Symbol">→</a> <a id="2751" class="Symbol">(</a><a id="2752" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="2755" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="2760" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="2762" href="Effect.Elaborate.html#2569" class="Bound">i</a><a id="2763" class="Symbol">)</a> <a id="2765" class="Symbol">.</a><a id="2766" href="Core.Signature.html#1174" class="Field">α</a> <a id="2768" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="2770" href="Effect.Elaborate.html#2560" class="Bound">c</a> <a id="2772" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2774" href="Effect.Elaborate.html#2591" class="Bound">k₁</a> <a id="2777" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="2781" href="Effect.Elaborate.html#2635" class="Bound">k₂</a> <a id="2784" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2786" href="Effect.Elaborate.html#2562" class="Bound">s</a> <a id="2788" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="2790" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2792" class="Symbol">(</a><a id="2793" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="2796" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="2801" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="2803" href="Effect.Elaborate.html#2569" class="Bound">i</a><a id="2804" class="Symbol">)</a> <a id="2806" class="Symbol">.</a><a id="2807" href="Core.Signature.html#1174" class="Field">α</a> <a id="2809" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="2811" href="Effect.Elaborate.html#2560" class="Bound">c</a> <a id="2813" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2815" href="Effect.Elaborate.html#2591" class="Bound">k₁</a> <a id="2818" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2820" href="Effect.Elaborate.html#2562" class="Bound">s</a> <a id="2822" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="2824" href="Core.Functor.Monad.html#423" class="Function Operator">&gt;&gt;=</a> <a id="2828" href="Effect.Elaborate.html#2635" class="Bound">k₂</a>

  <a id="Elaboration.elab-natural"></a><a id="2834" href="Effect.Elaborate.html#2834" class="Function">elab-natural</a> <a id="2847" class="Symbol">:</a> <a id="2849" class="Symbol">∀</a> <a id="2851" class="Symbol">{</a><a id="2852" href="Effect.Elaborate.html#2852" class="Bound">ε′</a><a id="2854" class="Symbol">}</a> <a id="2856" class="Symbol">→</a> <a id="2858" class="Symbol">⦃</a> <a id="2860" href="Effect.Elaborate.html#2860" class="Bound">_</a> <a id="2862" class="Symbol">:</a> <a id="2864" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="2866" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="2868" href="Effect.Elaborate.html#2852" class="Bound">ε′</a> <a id="2871" class="Symbol">⦄</a> <a id="2873" class="Symbol">→</a> <a id="2875" href="Core.Functor.NaturalTransformation.html#436" class="Record">Natural</a> <a id="2883" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> 
  <a id="2891" href="Effect.Elaborate.html#2834" class="Function">elab-natural</a> <a id="2904" class="Symbol">⦃</a> <a id="2906" href="Effect.Elaborate.html#2906" class="Bound">i</a> <a id="2908" class="Symbol">⦄</a> <a id="2910" class="Symbol">.</a><a id="2911" href="Core.Functor.NaturalTransformation.html#590" class="Field">commute</a> <a id="2919" class="Symbol">=</a> <a id="2921" href="Effect.Elaborate.html#2974" class="Function">commute-elab</a>
    <a id="2938" class="Keyword">where</a>
      <a id="2950" class="Keyword">open</a> <a id="2955" href="Relation.Binary.PropositionalEquality.Properties.html#6731" class="Module">≡-Reasoning</a>

      <a id="2974" href="Effect.Elaborate.html#2974" class="Function">commute-elab</a> <a id="2987" class="Symbol">:</a>  <a id="2990" class="Symbol">∀</a> <a id="2992" class="Symbol">{</a><a id="2993" href="Effect.Elaborate.html#2993" class="Bound">X</a> <a id="2995" href="Effect.Elaborate.html#2995" class="Bound">Y</a><a id="2996" class="Symbol">}</a> <a id="2998" class="Symbol">{</a><a id="2999" href="Effect.Elaborate.html#2999" class="Bound">f</a> <a id="3001" class="Symbol">:</a> <a id="3003" href="Effect.Elaborate.html#2993" class="Bound">X</a> <a id="3005" class="Symbol">→</a> <a id="3007" href="Effect.Elaborate.html#2995" class="Bound">Y</a><a id="3008" class="Symbol">}</a> <a id="3010" class="Symbol">→</a> <a id="3012" class="Symbol">(</a><a id="3013" href="Effect.Elaborate.html#3013" class="Bound">x</a> <a id="3015" class="Symbol">:</a> <a id="3017" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="3023" class="Symbol">(</a><a id="3024" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="3026" class="Symbol">_)</a> <a id="3029" href="Effect.Elaborate.html#2993" class="Bound">X</a><a id="3030" class="Symbol">)</a> <a id="3032" class="Symbol">→</a> <a id="3034" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="3037" class="Symbol">(</a><a id="3038" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3043" href="Effect.Elaborate.html#2999" class="Bound">f</a> <a id="3045" href="Effect.Elaborate.html#3013" class="Bound">x</a><a id="3046" class="Symbol">)</a> <a id="3048" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a> <a id="3050" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>  <a id="3053" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3058" href="Effect.Elaborate.html#2999" class="Bound">f</a> <a id="3060" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="3063" href="Effect.Elaborate.html#3013" class="Bound">x</a> <a id="3065" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a> 
      <a id="3074" href="Effect.Elaborate.html#2974" class="Function">commute-elab</a> <a id="3087" class="Symbol">(</a><a id="3088" href="Effect.Syntax.Hefty.html#454" class="InductiveConstructor">pure</a> <a id="3093" href="Effect.Elaborate.html#3093" class="Bound">x</a><a id="3094" class="Symbol">)</a> <a id="3096" class="Symbol">=</a> <a id="3098" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="3109" href="Effect.Elaborate.html#2974" class="Function">commute-elab</a> <a id="3122" class="Symbol">{</a><a id="3123" class="Argument">f</a> <a id="3125" class="Symbol">=</a> <a id="3127" href="Effect.Elaborate.html#3127" class="Bound">f</a><a id="3128" class="Symbol">}</a> <a id="3130" class="Symbol">(</a><a id="3131" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="3138" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3140" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3142" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3144" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3146" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3148" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3150" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="3151" class="Symbol">)</a> <a id="3153" class="Symbol">=</a>
        <a id="3163" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
          <a id="3179" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="3182" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3187" href="Effect.Elaborate.html#3127" class="Bound">f</a> <a id="3189" class="Symbol">(</a><a id="3190" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="3197" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3199" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3201" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3203" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3205" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3207" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3209" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="3210" class="Symbol">)</a> <a id="3212" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a>
        <a id="3222" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
          <a id="3236" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="3239" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="3246" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3248" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3250" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3252" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3257" href="Effect.Elaborate.html#3127" class="Bound">f</a> <a id="3259" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3261" href="Effect.Elaborate.html#3144" class="Bound">k</a>  <a id="3264" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3266" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3268" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="3270" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a>
        <a id="3280" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
          <a id="3294" class="Symbol">(</a><a id="3295" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="3298" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="3303" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="3305" href="Effect.Elaborate.html#2906" class="Bound">i</a><a id="3306" class="Symbol">)</a> <a id="3308" class="Symbol">.</a><a id="3309" href="Core.Signature.html#1174" class="Field">α</a> <a id="3311" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3313" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3315" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3317" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="3320" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3325" href="Effect.Elaborate.html#3127" class="Bound">f</a> <a id="3327" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3329" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3331" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="3333" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3335" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="3340" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3342" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3344" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a>
        <a id="3354" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="3357" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="3362" class="Symbol">(λ</a> <a id="3365" href="Effect.Elaborate.html#3365" class="Bound">○</a> <a id="3367" class="Symbol">→</a> <a id="3369" class="Symbol">(</a><a id="3370" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="3373" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="3378" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="3380" href="Effect.Elaborate.html#2906" class="Bound">i</a><a id="3381" class="Symbol">)</a> <a id="3383" class="Symbol">.</a><a id="3384" href="Core.Signature.html#1174" class="Field">α</a> <a id="3386" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3388" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3390" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3392" href="Effect.Elaborate.html#3365" class="Bound">○</a> <a id="3394" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3396" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="3401" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3403" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3405" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="3406" class="Symbol">)</a> <a id="3408" class="Symbol">(</a><a id="3409" href="Core.Extensionality.html#201" class="Function">extensionality</a> <a id="3424" class="Symbol">λ</a> <a id="3426" href="Effect.Elaborate.html#3426" class="Bound">x</a> <a id="3428" class="Symbol">→</a> <a id="3430" href="Effect.Elaborate.html#2974" class="Function">commute-elab</a> <a id="3443" class="Symbol">(</a><a id="3444" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3446" href="Effect.Elaborate.html#3426" class="Bound">x</a><a id="3447" class="Symbol">))</a> <a id="3450" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
          <a id="3462" class="Symbol">(</a><a id="3463" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="3466" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="3471" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="3473" href="Effect.Elaborate.html#2906" class="Bound">i</a><a id="3474" class="Symbol">)</a> <a id="3476" class="Symbol">.</a><a id="3477" href="Core.Signature.html#1174" class="Field">α</a> <a id="3479" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3481" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3483" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3485" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3490" href="Effect.Elaborate.html#3127" class="Bound">f</a> <a id="3492" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3494" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="3497" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3499" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="3501" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3503" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="3508" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3510" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3512" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> 
        <a id="3523" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
          <a id="3537" class="Symbol">(</a><a id="3538" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="3541" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="3546" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="3548" href="Effect.Elaborate.html#2906" class="Bound">i</a><a id="3549" class="Symbol">)</a> <a id="3551" class="Symbol">.</a><a id="3552" href="Core.Signature.html#1174" class="Field">α</a> <a id="3554" class="Symbol">(</a><a id="3555" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3560" href="Effect.Elaborate.html#3127" class="Bound">f</a> <a id="3562" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3564" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3566" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3568" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="3571" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3573" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="3575" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3577" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="3582" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3584" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3586" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="3587" class="Symbol">)</a>
        <a id="3597" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="3600" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="3609" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3611" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3613" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3615" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="3618" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3620" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="3622" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3624" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="3629" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3631" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3633" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="3635" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a> 
          <a id="3648" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3653" href="Effect.Elaborate.html#3127" class="Bound">f</a> <a id="3655" class="Symbol">((</a><a id="3657" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="3660" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="3665" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="3667" href="Effect.Elaborate.html#2906" class="Bound">i</a><a id="3668" class="Symbol">)</a> <a id="3670" class="Symbol">.</a><a id="3671" href="Core.Signature.html#1174" class="Field">α</a> <a id="3673" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3675" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3677" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3679" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="3682" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3684" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="3686" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3688" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="3693" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3695" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3697" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="3698" class="Symbol">)</a> 
        <a id="3709" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
          <a id="3723" href="Core.Functor.html#495" class="Field">fmap</a> <a id="3728" href="Effect.Elaborate.html#3127" class="Bound">f</a> <a id="3730" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="3733" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="3740" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="3742" href="Effect.Elaborate.html#3140" class="Bound">c</a> <a id="3744" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3746" href="Effect.Elaborate.html#3144" class="Bound">k</a> <a id="3748" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3750" href="Effect.Elaborate.html#3148" class="Bound">s</a> <a id="3752" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="3754" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a>
        <a id="3764" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
  
  <a id="3771" class="Comment">-- Elaborations respect identities</a>
  <a id="Elaboration.elab-id"></a><a id="3808" href="Effect.Elaborate.html#3808" class="Function">elab-id</a> <a id="3816" class="Symbol">:</a> <a id="3818" class="Symbol">⦃</a> <a id="3820" href="Effect.Elaborate.html#3820" class="Bound">_</a> <a id="3822" class="Symbol">:</a> <a id="3824" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="3826" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="3828" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="3831" class="Symbol">⦄</a> <a id="3833" class="Symbol">→</a> <a id="3835" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="3838" href="Core.Functor.Monad.html#348" class="Field">return</a> <a id="3845" class="Symbol">{</a><a id="3846" class="Argument">A</a> <a id="3848" class="Symbol">=</a> <a id="3850" href="Core.Functor.html#1514" class="Generalizable">A</a><a id="3851" class="Symbol">}</a> <a id="3853" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="3855" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3857" href="Core.Functor.Monad.html#348" class="Field">return</a> <a id="3864" class="Symbol">{</a><a id="3865" class="Argument">F</a> <a id="3867" class="Symbol">=</a> <a id="3869" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="3874" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="3876" class="Symbol">}</a>
  <a id="3880" href="Effect.Elaborate.html#3808" class="Function">elab-id</a> <a id="3888" class="Symbol">=</a> <a id="3890" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

  <a id="3898" class="Comment">-- Show that pointwise elaborations respect Kleisli composition </a>
  <a id="3965" class="Keyword">mutual</a>
    <a id="Elaboration.elab-∘′"></a><a id="3976" href="Effect.Elaborate.html#3976" class="Function">elab-∘′</a> <a id="3984" class="Symbol">:</a> <a id="3986" class="Symbol">∀</a> <a id="3988" class="Symbol">{</a><a id="3989" href="Effect.Elaborate.html#3989" class="Bound">B</a> <a id="3991" href="Effect.Elaborate.html#3991" class="Bound">C</a> <a id="3993" class="Symbol">:</a> <a id="3995" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3998" class="Symbol">}</a>
              <a id="4014" class="Symbol">→</a> <a id="4016" class="Symbol">⦃</a> <a id="4018" href="Effect.Elaborate.html#4018" class="Bound">_</a> <a id="4020" class="Symbol">:</a> <a id="4022" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="4024" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="4026" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="4029" class="Symbol">⦄</a>
              <a id="4045" class="Symbol">→</a> <a id="4047" class="Symbol">(</a><a id="4048" href="Effect.Elaborate.html#4048" class="Bound">m</a> <a id="4050" class="Symbol">:</a>  <a id="4053" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="4059" class="Symbol">(</a><a id="4060" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="4062" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="4064" class="Symbol">)</a> <a id="4066" href="Effect.Elaborate.html#3989" class="Bound">B</a><a id="4067" class="Symbol">)</a>
              <a id="4083" class="Symbol">→</a> <a id="4085" class="Symbol">(</a><a id="4086" href="Effect.Elaborate.html#4086" class="Bound">k</a> <a id="4088" class="Symbol">:</a> <a id="4090" href="Effect.Elaborate.html#3989" class="Bound">B</a> <a id="4092" class="Symbol">→</a> <a id="4094" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="4100" class="Symbol">(</a><a id="4101" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="4103" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="4105" class="Symbol">)</a> <a id="4107" href="Effect.Elaborate.html#3991" class="Bound">C</a><a id="4108" class="Symbol">)</a>
                <a id="4126" class="Comment">------------------------------------</a>
              <a id="4177" class="Symbol">→</a> <a id="4179" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="4182" href="Effect.Elaborate.html#4048" class="Bound">m</a> <a id="4184" href="Core.Functor.Monad.html#423" class="Function Operator">&gt;&gt;=</a> <a id="4188" href="Effect.Elaborate.html#4086" class="Bound">k</a> <a id="4190" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a> <a id="4192" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4194" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="4197" href="Effect.Elaborate.html#4048" class="Bound">m</a> <a id="4199" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a> <a id="4201" href="Core.Functor.Monad.html#423" class="Function Operator">&gt;&gt;=</a> <a id="4205" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4208" href="Effect.Elaborate.html#4086" class="Bound">k</a> <a id="4210" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a>
    <a id="4216" href="Effect.Elaborate.html#3976" class="Function">elab-∘′</a> <a id="4224" class="Symbol">(</a><a id="4225" href="Effect.Syntax.Hefty.html#454" class="InductiveConstructor">pure</a> <a id="4230" href="Effect.Elaborate.html#4230" class="Bound">x</a><a id="4231" class="Symbol">)</a> <a id="4233" href="Effect.Elaborate.html#4233" class="Bound">k</a> <a id="4235" class="Symbol">=</a> <a id="4237" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
    <a id="4246" href="Effect.Elaborate.html#3976" class="Function">elab-∘′</a> <a id="4254" class="Symbol">⦃</a> <a id="4256" href="Effect.Elaborate.html#4256" class="Bound">i</a> <a id="4258" class="Symbol">⦄</a> <a id="4260" class="Symbol">(</a><a id="4261" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="4268" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4270" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4272" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4274" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4277" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4279" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4281" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="4282" class="Symbol">)</a> <a id="4284" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="4286" class="Symbol">=</a>
      <a id="4294" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="4308" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="4311" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="4318" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4320" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4322" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4324" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4327" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4329" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4331" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="4333" href="Core.Functor.Monad.html#423" class="Function Operator">&gt;&gt;=</a> <a id="4337" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="4339" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a>
      <a id="4347" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a> 
        <a id="4360" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="4363" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="4370" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4372" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4374" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4376" class="Symbol">(</a><a id="4377" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4380" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="4384" href="Effect.Elaborate.html#4284" class="Bound">k</a><a id="4385" class="Symbol">)</a> <a id="4387" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4389" class="Symbol">(</a><a id="4390" href="Core.Functor.Monad.html#423" class="Function Operator">_&gt;&gt;=</a> <a id="4395" href="Effect.Syntax.Hefty.html#454" class="InductiveConstructor">pure</a><a id="4399" class="Symbol">)</a> <a id="4401" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4403" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4405" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="4407" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a>
      <a id="4415" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="4418" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="4423" class="Symbol">(λ</a> <a id="4426" href="Effect.Elaborate.html#4426" class="Bound">○</a> <a id="4428" class="Symbol">→</a> <a id="4430" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="4433" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="4440" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4442" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4444" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4446" class="Symbol">(</a><a id="4447" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4450" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="4454" href="Effect.Elaborate.html#4284" class="Bound">k</a><a id="4455" class="Symbol">)</a> <a id="4457" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4459" href="Effect.Elaborate.html#4426" class="Bound">○</a> <a id="4461" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="4463" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a><a id="4464" class="Symbol">)</a> <a id="4466" class="Symbol">(</a><a id="4467" href="Core.Extensionality.html#201" class="Function">extensionality</a> <a id="4482" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4484" class="Symbol">λ</a> <a id="4486" href="Effect.Elaborate.html#4486" class="Bound">ψ</a> <a id="4488" class="Symbol">→</a> <a id="4490" href="Core.Functor.Monad.html#797" class="Field">&gt;&gt;=-idʳ</a> <a id="4498" class="Symbol">(</a><a id="4499" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4501" href="Effect.Elaborate.html#4486" class="Bound">ψ</a><a id="4502" class="Symbol">))</a> <a id="4505" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
        <a id="4515" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="4518" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="4525" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4527" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4529" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4531" class="Symbol">(</a><a id="4532" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4535" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="4539" href="Effect.Elaborate.html#4284" class="Bound">k</a><a id="4540" class="Symbol">)</a> <a id="4542" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4544" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4546" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="4548" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a>
      <a id="4556" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a> 
        <a id="4569" href="Effect.Syntax.Hefty.html#664" class="Function">fold-hefty</a> <a id="4580" href="Effect.Syntax.Free.html#529" class="InductiveConstructor">pure</a> <a id="4585" class="Symbol">(</a><a id="4586" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="4589" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="4594" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="4596" href="Effect.Elaborate.html#4256" class="Bound">i</a><a id="4597" class="Symbol">)</a> <a id="4599" class="Symbol">(</a><a id="4600" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="4607" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4609" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4611" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4613" class="Symbol">(</a><a id="4614" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4617" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="4621" href="Effect.Elaborate.html#4284" class="Bound">k</a><a id="4622" class="Symbol">)</a> <a id="4624" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4626" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4628" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="4629" class="Symbol">)</a>
      <a id="4637" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
        <a id="4649" class="Symbol">(</a><a id="4650" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="4653" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="4658" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="4660" href="Effect.Elaborate.html#4256" class="Bound">i</a><a id="4661" class="Symbol">)</a> <a id="4663" class="Symbol">.</a><a id="4664" href="Core.Signature.html#1174" class="Field">α</a> <a id="4666" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4668" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4670" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4672" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4675" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4678" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="4682" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="4684" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="4686" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4688" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="4693" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4695" href="Effect.Elaborate.html#4279" class="Bound">s</a>  <a id="4698" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> 
      <a id="4707" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="4710" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="4715" class="Symbol">(λ</a> <a id="4718" href="Effect.Elaborate.html#4718" class="Bound">○</a> <a id="4720" class="Symbol">→</a> <a id="4722" class="Symbol">(</a><a id="4723" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="4726" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="4731" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="4733" href="Effect.Elaborate.html#4256" class="Bound">i</a><a id="4734" class="Symbol">)</a> <a id="4736" class="Symbol">.</a><a id="4737" href="Core.Signature.html#1174" class="Field">α</a> <a id="4739" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4741" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4743" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4745" href="Effect.Elaborate.html#4718" class="Bound">○</a> <a id="4747" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4749" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="4754" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4756" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4758" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="4759" class="Symbol">)</a> <a id="4761" class="Symbol">(</a><a id="4762" href="Effect.Elaborate.html#5155" class="Function">elab-∘</a> <a id="4769" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4772" href="Effect.Elaborate.html#4284" class="Bound">k</a><a id="4773" class="Symbol">)</a> <a id="4775" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
        <a id="4785" class="Symbol">(</a><a id="4786" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="4789" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="4794" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="4796" href="Effect.Elaborate.html#4256" class="Bound">i</a><a id="4797" class="Symbol">)</a> <a id="4799" class="Symbol">.</a><a id="4800" href="Core.Signature.html#1174" class="Field">α</a> <a id="4802" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4804" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4806" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4808" class="Symbol">(</a><a id="4809" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4812" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4815" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="4817" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="4821" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4824" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="4826" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a><a id="4827" class="Symbol">)</a> <a id="4829" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4831" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="4836" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4838" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4840" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> 
      <a id="4849" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="4852" href="Effect.Elaborate.html#2533" class="Field">coherent</a> <a id="4861" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4864" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4867" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="4869" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4872" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="4874" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="4876" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a> 
        <a id="4887" class="Symbol">(</a><a id="4888" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="4891" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="4896" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="4898" href="Effect.Elaborate.html#4256" class="Bound">i</a><a id="4899" class="Symbol">)</a> <a id="4901" class="Symbol">.</a><a id="4902" href="Core.Signature.html#1174" class="Field">α</a> <a id="4904" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="4906" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="4908" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4910" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4913" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="4916" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="4918" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4920" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦_⟧</a> <a id="4925" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4927" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="4929" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="4931" href="Core.Functor.Monad.html#423" class="Function Operator">&gt;&gt;=</a> <a id="4935" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="4938" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="4940" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> 
      <a id="4949" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a> 
        <a id="4962" href="Effect.Syntax.Hefty.html#664" class="Function">fold-hefty</a> <a id="4973" href="Effect.Syntax.Free.html#529" class="InductiveConstructor">pure</a> <a id="4978" class="Symbol">(</a><a id="4979" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="4982" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="4987" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="4989" href="Effect.Elaborate.html#4256" class="Bound">i</a><a id="4990" class="Symbol">)</a> <a id="4992" class="Symbol">(</a><a id="4993" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="5000" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="5002" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="5004" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5006" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="5009" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5011" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="5013" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a><a id="5014" class="Symbol">)</a> <a id="5016" href="Core.Functor.Monad.html#423" class="Function Operator">&gt;&gt;=</a> <a id="5020" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="5023" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="5025" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> 
      <a id="5034" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a> 
        <a id="5047" href="Effect.Elaborate.html#1426" class="Function Operator">ℰ⟦</a> <a id="5050" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="5057" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="5059" href="Effect.Elaborate.html#4270" class="Bound">c</a> <a id="5061" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5063" href="Effect.Elaborate.html#4274" class="Bound">k′</a> <a id="5066" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5068" href="Effect.Elaborate.html#4279" class="Bound">s</a> <a id="5070" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="5072" href="Effect.Elaborate.html#1426" class="Function Operator">⟧</a> <a id="5074" href="Core.Functor.Monad.html#423" class="Function Operator">&gt;&gt;=</a> <a id="5078" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="5081" href="Effect.Elaborate.html#4284" class="Bound">k</a> <a id="5083" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a>
      <a id="5091" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
      <a id="5099" class="Keyword">where</a>
        <a id="5113" class="Keyword">open</a> <a id="5118" href="Relation.Binary.PropositionalEquality.Properties.html#6731" class="Module">≡-Reasoning</a>

    <a id="5135" class="Comment">-- Elaboration </a>
    <a id="Elaboration.elab-∘"></a><a id="5155" href="Effect.Elaborate.html#5155" class="Function">elab-∘</a> <a id="5162" class="Symbol">:</a> <a id="5164" class="Symbol">∀</a> <a id="5166" class="Symbol">{</a><a id="5167" href="Effect.Elaborate.html#5167" class="Bound">A</a> <a id="5169" href="Effect.Elaborate.html#5169" class="Bound">B</a> <a id="5171" href="Effect.Elaborate.html#5171" class="Bound">C</a> <a id="5173" class="Symbol">:</a> <a id="5175" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5178" class="Symbol">}</a>
             <a id="5193" class="Symbol">→</a> <a id="5195" class="Symbol">⦃</a> <a id="5197" href="Effect.Elaborate.html#5197" class="Bound">_</a> <a id="5199" class="Symbol">:</a> <a id="5201" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="5203" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="5205" href="Effect.Base.html#930" class="Generalizable">ε′</a> <a id="5208" class="Symbol">⦄</a>
             <a id="5223" class="Symbol">→</a> <a id="5225" class="Symbol">(</a><a id="5226" href="Effect.Elaborate.html#5226" class="Bound">k₁</a> <a id="5229" class="Symbol">:</a> <a id="5231" href="Effect.Elaborate.html#5167" class="Bound">A</a> <a id="5233" class="Symbol">→</a> <a id="5235" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="5241" class="Symbol">(</a><a id="5242" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="5244" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="5246" class="Symbol">)</a> <a id="5248" href="Effect.Elaborate.html#5169" class="Bound">B</a><a id="5249" class="Symbol">)</a>
             <a id="5264" class="Symbol">→</a> <a id="5266" class="Symbol">(</a><a id="5267" href="Effect.Elaborate.html#5267" class="Bound">k₂</a> <a id="5270" class="Symbol">:</a> <a id="5272" href="Effect.Elaborate.html#5169" class="Bound">B</a> <a id="5274" class="Symbol">→</a> <a id="5276" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="5282" class="Symbol">(</a><a id="5283" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="5285" href="Effect.Base.html#930" class="Generalizable">ε′</a><a id="5287" class="Symbol">)</a> <a id="5289" href="Effect.Elaborate.html#5171" class="Bound">C</a><a id="5290" class="Symbol">)</a>
               <a id="5307" class="Comment">------------------------------------</a>
             <a id="5357" class="Symbol">→</a> <a id="5359" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="5362" href="Effect.Elaborate.html#5226" class="Bound">k₁</a> <a id="5365" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="5369" href="Effect.Elaborate.html#5267" class="Bound">k₂</a> <a id="5372" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="5374" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5376" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="5379" href="Effect.Elaborate.html#5226" class="Bound">k₁</a> <a id="5382" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a> <a id="5384" href="Core.Functor.Monad.html#475" class="Function Operator">&gt;=&gt;</a> <a id="5388" href="Effect.Elaborate.html#1724" class="Function Operator">ℰ⟪</a> <a id="5391" href="Effect.Elaborate.html#5267" class="Bound">k₂</a> <a id="5394" href="Effect.Elaborate.html#1724" class="Function Operator">⟫</a>
    <a id="5400" href="Effect.Elaborate.html#5155" class="Function">elab-∘</a> <a id="5407" class="Symbol">⦃</a> <a id="5409" href="Effect.Elaborate.html#5409" class="Bound">i</a> <a id="5411" class="Symbol">⦄</a> <a id="5413" href="Effect.Elaborate.html#5413" class="Bound">k₁</a> <a id="5416" href="Effect.Elaborate.html#5416" class="Bound">k₂</a> <a id="5419" class="Symbol">=</a> <a id="5421" href="Core.Extensionality.html#201" class="Function">extensionality</a> <a id="5436" class="Symbol">λ</a> <a id="5438" href="Effect.Elaborate.html#5438" class="Bound">x</a> <a id="5440" class="Symbol">→</a> <a id="5442" href="Effect.Elaborate.html#3976" class="Function">elab-∘′</a> <a id="5450" class="Symbol">(</a><a id="5451" href="Effect.Elaborate.html#5413" class="Bound">k₁</a> <a id="5454" href="Effect.Elaborate.html#5438" class="Bound">x</a><a id="5455" class="Symbol">)</a> <a id="5457" href="Effect.Elaborate.html#5416" class="Bound">k₂</a>     

    <a id="5470" class="Comment">-- Elaborations are a monad morphism between Hefty trees and the Free monad</a>
    <a id="Elaboration.elab-mm"></a><a id="5550" href="Effect.Elaborate.html#5550" class="Function">elab-mm</a> <a id="5558" class="Symbol">:</a> <a id="5560" class="Symbol">∀</a> <a id="5562" class="Symbol">{</a><a id="5563" href="Effect.Elaborate.html#5563" class="Bound">ε′</a><a id="5565" class="Symbol">}</a> <a id="5567" class="Symbol">→</a> <a id="5569" class="Symbol">⦃</a> <a id="5571" href="Effect.Elaborate.html#5571" class="Bound">_</a> <a id="5573" class="Symbol">:</a> <a id="5575" href="Effect.Elaborate.html#1145" class="Bound">ε</a> <a id="5577" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="5579" href="Effect.Elaborate.html#5563" class="Bound">ε′</a> <a id="5582" class="Symbol">⦄</a> <a id="5584" class="Symbol">→</a> <a id="5586" href="Core.Functor.Monad.html#1494" class="Record">MonadMorphism</a> <a id="5600" class="Symbol">(</a><a id="5601" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="5607" class="Symbol">(</a><a id="5608" href="Effect.Elaborate.html#1131" class="Bound">η</a> <a id="5610" href="Effect.Elaborate.html#5563" class="Bound">ε′</a><a id="5612" class="Symbol">))</a> <a id="5615" class="Symbol">(</a><a id="5616" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="5621" href="Effect.Elaborate.html#5563" class="Bound">ε′</a><a id="5623" class="Symbol">)</a>
    <a id="5629" href="Effect.Elaborate.html#5550" class="Function">elab-mm</a> <a id="5637" class="Symbol">=</a> <a id="5639" class="Keyword">record</a>
      <a id="5652" class="Symbol">{</a> <a id="5654" href="Core.Functor.Monad.html#1587" class="Field">Ψ</a>         <a id="5664" class="Symbol">=</a> <a id="5666" href="Effect.Elaborate.html#1318" class="Function">elaborate′</a>
      <a id="5683" class="Symbol">;</a> <a id="5685" href="Core.Functor.Monad.html#1614" class="Field">Ψ-natural</a> <a id="5695" class="Symbol">=</a> <a id="5697" href="Effect.Elaborate.html#2834" class="Function">elab-natural</a>
      <a id="5716" class="Symbol">;</a> <a id="5718" href="Core.Functor.Monad.html#1698" class="Field">resp-unit</a> <a id="5728" class="Symbol">=</a> <a id="5730" href="Effect.Elaborate.html#3808" class="Function">elab-id</a>
      <a id="5744" class="Symbol">;</a> <a id="5746" href="Core.Functor.Monad.html#1850" class="Field">resp-join</a> <a id="5756" class="Symbol">=</a> <a id="5758" href="Effect.Elaborate.html#5155" class="Function">elab-∘</a>
      <a id="5771" class="Symbol">}</a>

<a id="5774" class="Keyword">open</a> <a id="5779" href="Effect.Elaborate.html#1118" class="Module">Elaboration</a>

<a id="5792" class="Comment">--Sub-elaborations</a>
<a id="5811" class="Keyword">record</a> <a id="_⊑_"></a><a id="5818" href="Effect.Elaborate.html#5818" class="Record Operator">_⊑_</a> <a id="5822" class="Symbol">(</a><a id="5823" href="Effect.Elaborate.html#5823" class="Bound">e₁</a> <a id="5826" class="Symbol">:</a> <a id="5828" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="5840" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="5843" href="Effect.Base.html#921" class="Generalizable">ε₁</a><a id="5845" class="Symbol">)</a> <a id="5847" class="Symbol">(</a><a id="5848" href="Effect.Elaborate.html#5848" class="Bound">e₂</a> <a id="5851" class="Symbol">:</a> <a id="5853" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="5865" href="Effect.Base.html#956" class="Generalizable">η₂</a> <a id="5868" href="Effect.Base.html#924" class="Generalizable">ε₂</a><a id="5870" class="Symbol">)</a> <a id="5872" class="Symbol">:</a> <a id="5874" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="5879" class="Keyword">where</a>
  <a id="5887" class="Keyword">field</a>
    <a id="5897" class="Symbol">⦃</a> <a id="_⊑_.≲-eff"></a><a id="5899" href="Effect.Elaborate.html#5899" class="Field">≲-eff</a>  <a id="5906" class="Symbol">⦄</a>        <a id="5915" class="Symbol">:</a> <a id="5917" href="Effect.Elaborate.html#5843" class="Bound">ε₁</a> <a id="5920" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="5922" href="Effect.Elaborate.html#5868" class="Bound">ε₂</a>
    <a id="5929" class="Symbol">⦃</a> <a id="_⊑_.≲-effᴴ"></a><a id="5931" href="Effect.Elaborate.html#5931" class="Field">≲-effᴴ</a> <a id="5938" class="Symbol">⦄</a>        <a id="5947" class="Symbol">:</a> <a id="5949" href="Effect.Elaborate.html#5840" class="Bound">η₁</a> <a id="5952" href="Core.Ternary.html#666" class="Field Operator">≲</a> <a id="5954" href="Effect.Elaborate.html#5865" class="Bound">η₂</a>
    <a id="_⊑_.preserves-cases"></a><a id="5961" href="Effect.Elaborate.html#5961" class="Field">preserves-cases</a> <a id="5977" class="Symbol">:</a>
      <a id="5985" class="Symbol">∀</a> <a id="5987" class="Symbol">{</a><a id="5988" href="Effect.Elaborate.html#5988" class="Bound">M</a><a id="5989" class="Symbol">}</a>
      <a id="5997" class="Symbol">→</a> <a id="5999" class="Symbol">(</a><a id="6000" href="Effect.Elaborate.html#6000" class="Bound">m</a> <a id="6002" class="Symbol">:</a> <a id="6004" href="Core.Signature.html#946" class="Record Operator">⟦</a> <a id="6006" href="Effect.Elaborate.html#5840" class="Bound">η₁</a> <a id="6009" href="Effect.Elaborate.html#5868" class="Bound">ε₂</a> <a id="6012" href="Core.Signature.html#946" class="Record Operator">⟧</a> <a id="6014" href="Effect.Elaborate.html#5988" class="Bound">M</a> <a id="6016" href="Core.Functor.html#1514" class="Generalizable">A</a><a id="6017" class="Symbol">)</a>
      <a id="6025" class="Symbol">→</a> <a id="6027" class="Symbol">(</a><a id="6028" href="Effect.Elaborate.html#6028" class="Bound">e′</a> <a id="6031" class="Symbol">:</a> <a id="6033" href="Relation.Unary.html#3793" class="Function">∀[</a> <a id="6036" href="Effect.Elaborate.html#5988" class="Bound">M</a> <a id="6038" href="Relation.Unary.html#5039" class="Function Operator">⇒</a> <a id="6040" href="Effect.Syntax.Free.html#483" class="Datatype">Free</a> <a id="6045" href="Effect.Elaborate.html#5868" class="Bound">ε₂</a> <a id="6048" href="Relation.Unary.html#3793" class="Function">]</a><a id="6049" class="Symbol">)</a>
        <a id="6059" class="Comment">---------------------------------------------</a>
      <a id="6111" class="Symbol">→</a>   <a id="6115" class="Symbol">(</a><a id="6116" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="6119" href="Effect.Elaborate.html#5823" class="Bound">e₁</a> <a id="6122" class="Symbol">.</a><a id="6123" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="6128" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="6130" class="Field">≲-eff</a> <a id="6136" class="Symbol">)</a> <a id="6138" class="Symbol">.</a><a id="6139" href="Core.Signature.html#1174" class="Field">α</a> <a id="6141" class="Symbol">(</a><a id="6142" href="Core.Signature.html#1804" class="Function">sig-hmap</a> <a id="6151" href="Effect.Elaborate.html#6028" class="Bound">e′</a> <a id="6154" href="Effect.Elaborate.html#6000" class="Bound">m</a><a id="6155" class="Symbol">)</a>
        <a id="6165" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6167" class="Symbol">(</a><a id="6168" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="6171" href="Effect.Elaborate.html#5848" class="Bound">e₂</a> <a id="6174" class="Symbol">.</a><a id="6175" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="6180" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="6182" href="Effect.Relation.Binary.FirstOrderInclusion.html#844" class="Function">≲-refl</a><a id="6188" class="Symbol">)</a> <a id="6190" class="Symbol">.</a><a id="6191" href="Core.Signature.html#1174" class="Field">α</a> <a id="6193" class="Symbol">(</a><a id="6194" href="Core.Signature.html#1804" class="Function">sig-hmap</a> <a id="6203" href="Effect.Elaborate.html#6028" class="Bound">e′</a> <a id="6206" class="Symbol">(</a><a id="6207" href="Effect.Relation.Binary.HigherOrderInclusion.html#796" class="Function">injᴴ</a> <a id="6212" href="Effect.Elaborate.html#6000" class="Bound">m</a><a id="6213" class="Symbol">))</a>

<a id="6217" class="Keyword">open</a> <a id="6222" href="Effect.Elaborate.html#5818" class="Module Operator">_⊑_</a> <a id="6226" class="Keyword">public</a> 


<a id="⊑-refl"></a><a id="6236" href="Effect.Elaborate.html#6236" class="Function">⊑-refl</a> <a id="6243" class="Symbol">:</a> <a id="6245" class="Symbol">{</a><a id="6246" href="Effect.Elaborate.html#6246" class="Bound">e</a> <a id="6248" class="Symbol">:</a> <a id="6250" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="6262" href="Effect.Base.html#951" class="Generalizable">η</a> <a id="6264" href="Effect.Base.html#919" class="Generalizable">ε</a><a id="6265" class="Symbol">}</a> <a id="6267" class="Symbol">→</a> <a id="6269" href="Effect.Elaborate.html#6246" class="Bound">e</a> <a id="6271" href="Effect.Elaborate.html#5818" class="Record Operator">⊑</a> <a id="6273" href="Effect.Elaborate.html#6246" class="Bound">e</a>
<a id="6275" href="Effect.Elaborate.html#5899" class="Field">≲-eff</a>           <a id="6291" href="Effect.Elaborate.html#6236" class="Function">⊑-refl</a>         <a id="6306" class="Symbol">=</a> <a id="6308" href="Effect.Relation.Binary.FirstOrderInclusion.html#844" class="Function">≲-refl</a> 
<a id="6316" href="Effect.Elaborate.html#5931" class="Field">≲-effᴴ</a>          <a id="6332" href="Effect.Elaborate.html#6236" class="Function">⊑-refl</a>         <a id="6347" class="Symbol">=</a> <a id="6349" href="Effect.Relation.Binary.HigherOrderInclusion.html#628" class="Function">≲ᴴ-refl</a>
<a id="6357" href="Effect.Elaborate.html#5961" class="Field">preserves-cases</a> <a id="6373" href="Effect.Elaborate.html#6236" class="Function">⊑-refl</a> <a id="6380" href="Effect.Elaborate.html#6380" class="Bound">m</a> <a id="6382" href="Effect.Elaborate.html#6382" class="Bound">e′</a>    <a id="6388" class="Symbol">=</a> <a id="6390" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="6396" class="Keyword">module</a> <a id="6403" href="Effect.Elaborate.html#6403" class="Module">_</a> <a id="6405" class="Symbol">{</a><a id="6406" href="Effect.Elaborate.html#6406" class="Bound">e₁</a> <a id="6409" class="Symbol">:</a> <a id="6411" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="6423" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="6426" href="Effect.Base.html#921" class="Generalizable">ε₁</a><a id="6428" class="Symbol">}</a> <a id="6430" class="Symbol">{</a><a id="6431" href="Effect.Elaborate.html#6431" class="Bound">e₂</a> <a id="6434" class="Symbol">:</a> <a id="6436" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="6448" href="Effect.Base.html#956" class="Generalizable">η₂</a> <a id="6451" href="Effect.Base.html#924" class="Generalizable">ε₂</a><a id="6453" class="Symbol">}</a> <a id="6455" class="Keyword">where</a> 

  <a id="6465" href="Effect.Elaborate.html#6465" class="Function">use-elab-def</a> <a id="6478" class="Symbol">:</a> 
    <a id="6485" class="Symbol">∀</a>  <a id="6488" class="Symbol">⦃</a> <a id="6490" href="Effect.Elaborate.html#6490" class="Bound">ζ</a> <a id="6492" class="Symbol">:</a> <a id="6494" href="Effect.Elaborate.html#6406" class="Bound">e₁</a> <a id="6497" href="Effect.Elaborate.html#5818" class="Record Operator">⊑</a> <a id="6499" href="Effect.Elaborate.html#6431" class="Bound">e₂</a> <a id="6502" class="Symbol">⦄</a>
    <a id="6508" class="Symbol">→</a> <a id="6510" class="Symbol">(</a><a id="6511" href="Effect.Elaborate.html#6511" class="Bound">m</a> <a id="6513" class="Symbol">:</a> <a id="6515" href="Core.Signature.html#946" class="Record Operator">⟦</a> <a id="6517" href="Effect.Elaborate.html#6423" class="Bound">η₁</a> <a id="6520" href="Effect.Elaborate.html#6451" class="Bound">ε₂</a> <a id="6523" href="Core.Signature.html#946" class="Record Operator">⟧</a> <a id="6525" class="Symbol">(</a><a id="6526" href="Effect.Syntax.Hefty.html#408" class="Datatype">Hefty</a> <a id="6532" class="Symbol">(</a><a id="6533" href="Effect.Elaborate.html#6448" class="Bound">η₂</a> <a id="6536" href="Effect.Elaborate.html#6451" class="Bound">ε₂</a><a id="6538" class="Symbol">))</a> <a id="6541" href="Core.Functor.html#1514" class="Generalizable">A</a><a id="6542" class="Symbol">)</a>
      <a id="6550" class="Comment">---------------------------------------------------</a>
    <a id="6606" class="Symbol">→</a>   <a id="6610" href="Effect.Elaborate.html#1225" class="Function">elaborate</a> <a id="6620" href="Effect.Elaborate.html#6431" class="Bound">e₂</a> <a id="6623" class="Symbol">(</a><a id="6624" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="6631" class="Symbol">(</a><a id="6632" href="Effect.Relation.Binary.HigherOrderInclusion.html#796" class="Function">injᴴ</a> <a id="6637" href="Effect.Elaborate.html#6511" class="Bound">m</a><a id="6638" class="Symbol">))</a>
      <a id="6647" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6649" class="Symbol">(</a><a id="6650" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="6653" href="Effect.Elaborate.html#6406" class="Bound">e₁</a> <a id="6656" class="Symbol">.</a><a id="6657" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="6662" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="6664" href="Effect.Elaborate.html#6490" class="Bound">ζ</a> <a id="6666" class="Symbol">.</a><a id="6667" href="Effect.Elaborate.html#5899" class="Field">≲-eff</a><a id="6672" class="Symbol">)</a> <a id="6674" class="Symbol">.</a><a id="6675" href="Core.Signature.html#1174" class="Field">α</a> <a id="6677" class="Symbol">(</a><a id="6678" href="Core.Signature.html#1804" class="Function">sig-hmap</a> <a id="6687" class="Symbol">(</a><a id="6688" href="Effect.Elaborate.html#1225" class="Function">elaborate</a> <a id="6698" href="Effect.Elaborate.html#6431" class="Bound">e₂</a><a id="6700" class="Symbol">)</a> <a id="6702" href="Effect.Elaborate.html#6511" class="Bound">m</a><a id="6703" class="Symbol">)</a>
  <a id="6707" href="Effect.Elaborate.html#6465" class="Function">use-elab-def</a> <a id="6720" class="Symbol">⦃</a> <a id="6722" href="Effect.Elaborate.html#6722" class="Bound">ζ</a> <a id="6724" class="Symbol">⦄</a> <a id="6726" href="Effect.Elaborate.html#6726" class="Bound">m</a> <a id="6728" class="Symbol">=</a>
    <a id="6734" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="6746" href="Effect.Elaborate.html#1225" class="Function">elaborate</a> <a id="6756" href="Effect.Elaborate.html#6431" class="Bound">e₂</a> <a id="6759" class="Symbol">(</a><a id="6760" href="Effect.Syntax.Hefty.html#497" class="InductiveConstructor">impure</a> <a id="6767" class="Symbol">(</a><a id="6768" href="Effect.Relation.Binary.HigherOrderInclusion.html#796" class="Function">injᴴ</a> <a id="6773" href="Effect.Elaborate.html#6726" class="Bound">m</a><a id="6774" class="Symbol">))</a>
    <a id="6781" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6784" class="Symbol">(</a><a id="6785" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="6789" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6791" href="Effect.Elaborate.html#6722" class="Bound">ζ</a> <a id="6793" class="Symbol">.</a><a id="6794" href="Effect.Elaborate.html#5961" class="Field">preserves-cases</a> <a id="6810" href="Effect.Elaborate.html#6726" class="Bound">m</a> <a id="6812" class="Symbol">(</a><a id="6813" href="Effect.Elaborate.html#1225" class="Function">elaborate</a> <a id="6823" href="Effect.Elaborate.html#6431" class="Bound">e₂</a><a id="6825" class="Symbol">))</a> <a id="6828" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="6836" class="Symbol">(</a><a id="6837" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="6840" href="Effect.Elaborate.html#6406" class="Bound">e₁</a> <a id="6843" class="Symbol">.</a><a id="6844" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="6849" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="6851" href="Effect.Elaborate.html#6722" class="Bound">ζ</a> <a id="6853" class="Symbol">.</a><a id="6854" href="Effect.Elaborate.html#5899" class="Field">≲-eff</a><a id="6859" class="Symbol">)</a> <a id="6861" class="Symbol">.</a><a id="6862" href="Core.Signature.html#1174" class="Field">α</a> <a id="6864" class="Symbol">(</a><a id="6865" href="Core.Signature.html#1804" class="Function">sig-hmap</a> <a id="6874" class="Symbol">(</a><a id="6875" href="Effect.Elaborate.html#1225" class="Function">elaborate</a> <a id="6885" href="Effect.Elaborate.html#6431" class="Bound">e₂</a><a id="6887" class="Symbol">)</a> <a id="6889" href="Effect.Elaborate.html#6726" class="Bound">m</a><a id="6890" class="Symbol">)</a>
    <a id="6896" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="6902" class="Keyword">where</a>
      <a id="6914" class="Keyword">open</a> <a id="6919" href="Relation.Binary.PropositionalEquality.Properties.html#6731" class="Module">≡-Reasoning</a>

<a id="6932" class="Keyword">open</a> <a id="6937" href="Core.Logic.html#2908" class="Module">□</a>
<a id="6939" class="Keyword">open</a> <a id="6944" href="Core.Logic.html#677" class="Module Operator">_✴_</a>

<a id="6949" class="Keyword">instance</a> <a id="elab-monotone"></a><a id="6958" href="Effect.Elaborate.html#6958" class="Function">elab-monotone</a> <a id="6972" class="Symbol">:</a> <a id="6974" href="Core.MonotonePredicate.html#1406" class="Record">Monotone</a> <a id="6983" class="Symbol">(</a><a id="6984" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="6996" href="Effect.Base.html#951" class="Generalizable">η</a><a id="6997" class="Symbol">)</a>
<a id="6999" href="Effect.Elaborate.html#6958" class="Function">elab-monotone</a> <a id="7013" class="Symbol">.</a><a id="7014" href="Core.MonotonePredicate.html#1472" class="Field">weaken</a> <a id="7021" href="Effect.Elaborate.html#7021" class="Bound">i</a> <a id="7023" href="Effect.Elaborate.html#7023" class="Bound">e</a> <a id="7025" class="Symbol">.</a><a id="7026" href="Effect.Elaborate.html#1182" class="Field">elab</a>             <a id="7043" class="Symbol">=</a> <a id="7045" href="Core.Logic.html#2981" class="InductiveConstructor">necessary</a> <a id="7055" class="Symbol">(λ</a> <a id="7058" href="Effect.Elaborate.html#7058" class="Bound">i′</a> <a id="7061" class="Symbol">→</a> <a id="7063" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="7066" href="Effect.Elaborate.html#7023" class="Bound">e</a> <a id="7068" class="Symbol">.</a><a id="7069" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="7074" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="7076" href="Effect.Relation.Binary.FirstOrderInclusion.html#889" class="Function">≲-trans</a> <a id="7084" href="Effect.Elaborate.html#7021" class="Bound">i</a> <a id="7086" href="Effect.Elaborate.html#7058" class="Bound">i′</a><a id="7088" class="Symbol">)</a>
<a id="7090" href="Effect.Elaborate.html#6958" class="Function">elab-monotone</a> <a id="7104" class="Symbol">.</a><a id="7105" href="Core.MonotonePredicate.html#1472" class="Field">weaken</a> <a id="7112" href="Effect.Elaborate.html#7112" class="Bound">i</a> <a id="7114" href="Effect.Elaborate.html#7114" class="Bound">e</a> <a id="7116" class="Symbol">.</a><a id="7117" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="7126" href="Effect.Elaborate.html#7126" class="Bound">x</a> <a id="7128" class="Symbol">⦃</a> <a id="7130" href="Effect.Elaborate.html#7130" class="Bound">i′</a> <a id="7133" class="Symbol">⦄</a> <a id="7135" class="Symbol">=</a> <a id="7137" href="Effect.Elaborate.html#7114" class="Bound">e</a> <a id="7139" class="Symbol">.</a><a id="7140" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="7149" href="Effect.Elaborate.html#7126" class="Bound">x</a> <a id="7151" class="Symbol">⦃</a> <a id="7153" href="Effect.Relation.Binary.FirstOrderInclusion.html#889" class="Function">≲-trans</a> <a id="7161" href="Effect.Elaborate.html#7112" class="Bound">i</a> <a id="7163" href="Effect.Elaborate.html#7130" class="Bound">i′</a> <a id="7166" class="Symbol">⦄</a> 
<a id="7169" href="Effect.Elaborate.html#6958" class="Function">elab-monotone</a> <a id="7183" class="Symbol">.</a><a id="7184" href="Core.MonotonePredicate.html#1472" class="Field">weaken</a> <a id="7191" href="Effect.Elaborate.html#7191" class="Bound">i</a> <a id="7193" href="Effect.Elaborate.html#7193" class="Bound">e</a> <a id="7195" class="Symbol">.</a><a id="7196" href="Effect.Elaborate.html#2533" class="Field">coherent</a>   <a id="7207" class="Symbol">⦃</a> <a id="7209" href="Effect.Elaborate.html#7209" class="Bound">i′</a> <a id="7212" class="Symbol">⦄</a> <a id="7214" class="Symbol">=</a> <a id="7216" class="Symbol">λ</a> <a id="7218" href="Effect.Elaborate.html#7218" class="Bound">k₁</a> <a id="7221" href="Effect.Elaborate.html#7221" class="Bound">k₂</a> <a id="7224" class="Symbol">→</a> <a id="7226" href="Effect.Elaborate.html#7193" class="Bound">e</a> <a id="7228" class="Symbol">.</a><a id="7229" href="Effect.Elaborate.html#2533" class="Field">coherent</a> <a id="7238" class="Symbol">⦃</a> <a id="7240" href="Effect.Relation.Binary.FirstOrderInclusion.html#889" class="Function">≲-trans</a> <a id="7248" href="Effect.Elaborate.html#7191" class="Bound">i</a> <a id="7250" href="Effect.Elaborate.html#7209" class="Bound">i′</a> <a id="7253" class="Symbol">⦄</a> <a id="7255" href="Effect.Elaborate.html#7218" class="Bound">k₁</a> <a id="7258" href="Effect.Elaborate.html#7221" class="Bound">k₂</a> 

<a id="7263" class="Comment">-- &quot;Homogeneous&quot; composition of elaborations. Combines two elaborations that</a>
<a id="7340" class="Comment">-- assume the *same* lower bound on the effects that they elaborate into</a>
<a id="_⟪⊕⟫_"></a><a id="7413" href="Effect.Elaborate.html#7413" class="Function Operator">_⟪⊕⟫_</a> <a id="7419" class="Symbol">:</a> <a id="7421" href="Relation.Unary.html#3793" class="Function">∀[</a> <a id="7424" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="7436" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="7439" href="Relation.Unary.html#5039" class="Function Operator">⇒</a> <a id="7441" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="7453" href="Effect.Base.html#956" class="Generalizable">η₂</a> <a id="7456" href="Relation.Unary.html#5039" class="Function Operator">⇒</a> <a id="7458" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="7470" class="Symbol">(</a><a id="7471" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="7474" href="Core.Signature.html#1557" class="Function Operator">·⊕</a> <a id="7477" href="Effect.Base.html#956" class="Generalizable">η₂</a><a id="7479" class="Symbol">)</a> <a id="7481" href="Relation.Unary.html#3793" class="Function">]</a>
<a id="7483" class="Symbol">(</a><a id="7484" href="Effect.Elaborate.html#7484" class="Bound">e₁</a> <a id="7487" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="7491" href="Effect.Elaborate.html#7491" class="Bound">e₂</a><a id="7493" class="Symbol">)</a> <a id="7495" class="Symbol">.</a><a id="7496" href="Effect.Elaborate.html#1182" class="Field">elab</a>                        <a id="7524" class="Symbol">=</a> <a id="7526" href="Core.Logic.html#2981" class="InductiveConstructor">necessary</a> <a id="7536" class="Symbol">λ</a> <a id="7538" href="Effect.Elaborate.html#7538" class="Bound">i</a> <a id="7540" class="Symbol">→</a> <a id="7542" class="Symbol">(</a><a id="7543" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="7546" href="Effect.Elaborate.html#7484" class="Bound">e₁</a> <a id="7549" class="Symbol">.</a><a id="7550" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="7555" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="7557" href="Effect.Elaborate.html#7538" class="Bound">i</a><a id="7558" class="Symbol">)</a> <a id="7560" href="Core.Signature.html#1640" class="Function Operator">⟨⊕⟩</a> <a id="7564" class="Symbol">(</a><a id="7565" href="Core.Logic.html#3008" class="Field Operator">□⟨</a> <a id="7568" href="Effect.Elaborate.html#7491" class="Bound">e₂</a> <a id="7571" class="Symbol">.</a><a id="7572" href="Effect.Elaborate.html#1182" class="Field">elab</a> <a id="7577" href="Core.Logic.html#3008" class="Field Operator">⟩</a> <a id="7579" href="Effect.Elaborate.html#7538" class="Bound">i</a><a id="7580" class="Symbol">)</a>
<a id="7582" class="Symbol">(</a><a id="7583" href="Effect.Elaborate.html#7583" class="Bound">e₁</a> <a id="7586" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="7590" href="Effect.Elaborate.html#7590" class="Bound">e₂</a><a id="7592" class="Symbol">)</a> <a id="7594" class="Symbol">.</a><a id="7595" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="7604" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="7606" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7611" href="Effect.Elaborate.html#7611" class="Bound">c</a> <a id="7613" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7615" href="Effect.Elaborate.html#7615" class="Bound">k</a> <a id="7617" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7619" href="Effect.Elaborate.html#7619" class="Bound">s</a> <a id="7621" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="7623" class="Symbol">=</a> <a id="7625" href="Effect.Elaborate.html#7583" class="Bound">e₁</a> <a id="7628" class="Symbol">.</a><a id="7629" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="7638" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="7640" href="Effect.Elaborate.html#7611" class="Bound">c</a> <a id="7642" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7644" href="Effect.Elaborate.html#7615" class="Bound">k</a> <a id="7646" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7648" href="Effect.Elaborate.html#7619" class="Bound">s</a> <a id="7650" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a>
<a id="7652" class="Symbol">(</a><a id="7653" href="Effect.Elaborate.html#7653" class="Bound">e₁</a> <a id="7656" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="7660" href="Effect.Elaborate.html#7660" class="Bound">e₂</a><a id="7662" class="Symbol">)</a> <a id="7664" class="Symbol">.</a><a id="7665" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="7674" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="7676" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7681" href="Effect.Elaborate.html#7681" class="Bound">c</a> <a id="7683" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7685" href="Effect.Elaborate.html#7685" class="Bound">k</a> <a id="7687" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7689" href="Effect.Elaborate.html#7689" class="Bound">s</a> <a id="7691" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a> <a id="7693" class="Symbol">=</a> <a id="7695" href="Effect.Elaborate.html#7660" class="Bound">e₂</a> <a id="7698" class="Symbol">.</a><a id="7699" href="Effect.Elaborate.html#1994" class="Field">commutes</a> <a id="7708" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟪</a> <a id="7710" href="Effect.Elaborate.html#7681" class="Bound">c</a> <a id="7712" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7714" href="Effect.Elaborate.html#7685" class="Bound">k</a> <a id="7716" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7718" href="Effect.Elaborate.html#7689" class="Bound">s</a> <a id="7720" href="Core.Signature.html#1004" class="InductiveConstructor Operator">⟫</a>
<a id="7722" class="Symbol">(</a><a id="7723" href="Effect.Elaborate.html#7723" class="Bound">e₁</a> <a id="7726" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="7730" href="Effect.Elaborate.html#7730" class="Bound">e₂</a><a id="7732" class="Symbol">)</a> <a id="7734" class="Symbol">.</a><a id="7735" href="Effect.Elaborate.html#2533" class="Field">coherent</a> <a id="7744" class="Symbol">{</a><a id="7745" class="Argument">c</a> <a id="7747" class="Symbol">=</a> <a id="7749" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7754" href="Effect.Elaborate.html#7754" class="Bound">x</a><a id="7755" class="Symbol">}</a>       <a id="7763" class="Symbol">=</a> <a id="7765" href="Effect.Elaborate.html#7723" class="Bound">e₁</a> <a id="7768" class="Symbol">.</a><a id="7769" href="Effect.Elaborate.html#2533" class="Field">coherent</a>
<a id="7778" class="Symbol">(</a><a id="7779" href="Effect.Elaborate.html#7779" class="Bound">e₁</a> <a id="7782" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="7786" href="Effect.Elaborate.html#7786" class="Bound">e₂</a><a id="7788" class="Symbol">)</a> <a id="7790" class="Symbol">.</a><a id="7791" href="Effect.Elaborate.html#2533" class="Field">coherent</a> <a id="7800" class="Symbol">{</a><a id="7801" class="Argument">c</a> <a id="7803" class="Symbol">=</a> <a id="7805" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7810" href="Effect.Elaborate.html#7810" class="Bound">y</a><a id="7811" class="Symbol">}</a>       <a id="7819" class="Symbol">=</a> <a id="7821" href="Effect.Elaborate.html#7786" class="Bound">e₂</a> <a id="7824" class="Symbol">.</a><a id="7825" href="Effect.Elaborate.html#2533" class="Field">coherent</a>

<a id="⊑-⟪⊕⟫-left"></a><a id="7835" href="Effect.Elaborate.html#7835" class="Function">⊑-⟪⊕⟫-left</a> <a id="7846" class="Symbol">:</a> <a id="7848" class="Symbol">∀</a> <a id="7850" class="Symbol">{</a><a id="7851" href="Effect.Elaborate.html#7851" class="Bound">e₁</a> <a id="7854" class="Symbol">:</a> <a id="7856" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="7868" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="7871" href="Effect.Base.html#919" class="Generalizable">ε</a><a id="7872" class="Symbol">}</a> <a id="7874" class="Symbol">→</a> <a id="7876" class="Symbol">{</a><a id="7877" href="Effect.Elaborate.html#7877" class="Bound">e₂</a> <a id="7880" class="Symbol">:</a> <a id="7882" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="7894" href="Effect.Base.html#956" class="Generalizable">η₂</a> <a id="7897" href="Effect.Base.html#919" class="Generalizable">ε</a><a id="7898" class="Symbol">}</a> <a id="7900" class="Symbol">→</a> <a id="7902" href="Effect.Elaborate.html#7851" class="Bound">e₁</a> <a id="7905" href="Effect.Elaborate.html#5818" class="Record Operator">⊑</a> <a id="7907" class="Symbol">(</a><a id="7908" href="Effect.Elaborate.html#7851" class="Bound">e₁</a> <a id="7911" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="7915" href="Effect.Elaborate.html#7877" class="Bound">e₂</a><a id="7917" class="Symbol">)</a>
<a id="7919" href="Effect.Elaborate.html#5899" class="Field">≲-eff</a>           <a id="7935" href="Effect.Elaborate.html#7835" class="Function">⊑-⟪⊕⟫-left</a>        <a id="7953" class="Symbol">=</a> <a id="7955" href="Effect.Relation.Binary.FirstOrderInclusion.html#844" class="Function">≲-refl</a>  
<a id="7964" href="Effect.Elaborate.html#5931" class="Field">≲-effᴴ</a>          <a id="7980" href="Effect.Elaborate.html#7835" class="Function">⊑-⟪⊕⟫-left</a>        <a id="7998" class="Symbol">=</a> <a id="8000" href="Effect.Relation.Binary.HigherOrderInclusion.html#1245" class="Function">·⊑-⊕-left</a>
<a id="8010" href="Effect.Elaborate.html#5961" class="Field">preserves-cases</a> <a id="8026" href="Effect.Elaborate.html#7835" class="Function">⊑-⟪⊕⟫-left</a> <a id="8037" class="Symbol">_</a> <a id="8039" class="Symbol">_</a>  <a id="8042" class="Symbol">=</a> <a id="8044" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> 

<a id="⊑-⟪⊕⟫-right"></a><a id="8051" href="Effect.Elaborate.html#8051" class="Function">⊑-⟪⊕⟫-right</a> <a id="8063" class="Symbol">:</a> <a id="8065" class="Symbol">∀</a> <a id="8067" class="Symbol">{</a><a id="8068" href="Effect.Elaborate.html#8068" class="Bound">e₁</a> <a id="8071" class="Symbol">:</a> <a id="8073" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="8085" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="8088" href="Effect.Base.html#919" class="Generalizable">ε</a><a id="8089" class="Symbol">}</a> <a id="8091" class="Symbol">→</a> <a id="8093" class="Symbol">{</a><a id="8094" href="Effect.Elaborate.html#8094" class="Bound">e₂</a> <a id="8097" class="Symbol">:</a> <a id="8099" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="8111" href="Effect.Base.html#956" class="Generalizable">η₂</a> <a id="8114" href="Effect.Base.html#919" class="Generalizable">ε</a><a id="8115" class="Symbol">}</a> <a id="8117" class="Symbol">→</a> <a id="8119" href="Effect.Elaborate.html#8094" class="Bound">e₂</a> <a id="8122" href="Effect.Elaborate.html#5818" class="Record Operator">⊑</a> <a id="8124" class="Symbol">(</a><a id="8125" href="Effect.Elaborate.html#8068" class="Bound">e₁</a> <a id="8128" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="8132" href="Effect.Elaborate.html#8094" class="Bound">e₂</a><a id="8134" class="Symbol">)</a>
<a id="8136" href="Effect.Elaborate.html#5899" class="Field">≲-eff</a>           <a id="8152" href="Effect.Elaborate.html#8051" class="Function">⊑-⟪⊕⟫-right</a>        <a id="8171" class="Symbol">=</a> <a id="8173" href="Effect.Relation.Binary.FirstOrderInclusion.html#844" class="Function">≲-refl</a>  
<a id="8182" href="Effect.Elaborate.html#5931" class="Field">≲-effᴴ</a>          <a id="8198" href="Effect.Elaborate.html#8051" class="Function">⊑-⟪⊕⟫-right</a>        <a id="8217" class="Symbol">=</a> <a id="8219" href="Effect.Relation.Binary.HigherOrderInclusion.html#1462" class="Function">·⊑-⊕-right</a>
<a id="8230" href="Effect.Elaborate.html#5961" class="Field">preserves-cases</a> <a id="8246" href="Effect.Elaborate.html#8051" class="Function">⊑-⟪⊕⟫-right</a> <a id="8258" class="Symbol">_</a> <a id="8260" class="Symbol">_</a>      <a id="8267" class="Symbol">=</a> <a id="8269" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="8275" class="Comment">-- &quot;Heterogeneous&quot; composition of elaborations. Combines two elaborations that</a>
<a id="8354" class="Comment">-- assume a *different* lower bound on the algebraic effects that they elaborate</a>
<a id="8435" class="Comment">-- into</a>
<a id="compose-elab"></a><a id="8443" href="Effect.Elaborate.html#8443" class="Function">compose-elab</a> <a id="8456" class="Symbol">:</a> <a id="8458" href="Relation.Unary.html#3793" class="Function">∀[</a> <a id="8461" class="Symbol">(</a><a id="8462" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="8474" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="8477" href="Core.Logic.html#677" class="Record Operator">✴</a> <a id="8479" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="8491" href="Effect.Base.html#956" class="Generalizable">η₂</a><a id="8493" class="Symbol">)</a> <a id="8495" href="Relation.Unary.html#5039" class="Function Operator">⇒</a> <a id="8497" href="Effect.Elaborate.html#1118" class="Record">Elaboration</a> <a id="8509" class="Symbol">(</a><a id="8510" href="Effect.Base.html#953" class="Generalizable">η₁</a> <a id="8513" href="Core.Signature.html#1557" class="Function Operator">·⊕</a> <a id="8516" href="Effect.Base.html#956" class="Generalizable">η₂</a><a id="8518" class="Symbol">)</a>  <a id="8521" href="Relation.Unary.html#3793" class="Function">]</a>
<a id="8523" href="Effect.Elaborate.html#8443" class="Function">compose-elab</a> <a id="8536" class="Symbol">(</a><a id="8537" href="Effect.Elaborate.html#8537" class="Bound">e₁</a> <a id="8540" href="Core.Logic.html#755" class="InductiveConstructor Operator">✴⟨</a> <a id="8543" href="Effect.Elaborate.html#8543" class="Bound">σ</a> <a id="8545" href="Core.Logic.html#755" class="InductiveConstructor Operator">⟩</a> <a id="8547" href="Effect.Elaborate.html#8547" class="Bound">e₂</a><a id="8549" class="Symbol">)</a> <a id="8551" class="Symbol">=</a> <a id="8553" href="Core.MonotonePredicate.html#1472" class="Field">weaken</a> <a id="8560" class="Symbol">(</a><a id="8561" href="Effect.Relation.Binary.FirstOrderInclusion.html#1260" class="Function">≲-∙-left</a> <a id="8570" href="Effect.Elaborate.html#8543" class="Bound">σ</a><a id="8571" class="Symbol">)</a> <a id="8573" href="Effect.Elaborate.html#8537" class="Bound">e₁</a> <a id="8576" href="Effect.Elaborate.html#7413" class="Function Operator">⟪⊕⟫</a> <a id="8580" href="Core.MonotonePredicate.html#1472" class="Field">weaken</a> <a id="8587" class="Symbol">(</a><a id="8588" href="Effect.Relation.Binary.FirstOrderInclusion.html#1315" class="Function">≲-∙-right</a> <a id="8598" href="Effect.Elaborate.html#8543" class="Bound">σ</a><a id="8599" class="Symbol">)</a> <a id="8601" href="Effect.Elaborate.html#8547" class="Bound">e₂</a>

<a id="8605" class="Comment">-- -- The adjoint relation between separating conjuntion and implication gives us</a>
<a id="8687" class="Comment">-- -- an equivalent operation that, given an elaboration, returns an &quot;extension</a>
<a id="8767" class="Comment">-- -- operation&quot; that captures the concept of extending other elaborations with a</a>
<a id="8849" class="Comment">-- -- known/given elaboration. The separating implication operation deals with the</a>
<a id="8932" class="Comment">-- -- different lower bounds these elaborations assume on the algebraic effects</a>
<a id="9012" class="Comment">-- -- they elaborate into.</a>
<a id="9039" class="Comment">-- --</a>
<a id="9045" class="Comment">-- -- Or, in other words, we can curry (and thus partially apply) the heterogeneous</a>
<a id="9129" class="Comment">-- -- composition operation.</a>
<a id="9158" class="Comment">-- extend-with : ∀[ Elaboration η₁ ⇒ (Elaboration η₂ ─✴ Elaboration (η₁ ·⊕ η₂)) ]</a>
<a id="9240" class="Comment">-- extend-with = ✴-curry compose-elab</a>
</pre></body></html>